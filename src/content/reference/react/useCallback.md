---
title: useCallback
---

<Intro>

`useCallback` —Ü–µ —Ö—É–∫, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –∫–µ—à—É–≤–∞—Ç–∏ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏.

```js
const cachedFn = useCallback(fn, dependencies)
```

</Intro>

<Note>

[React Compiler](/learn/react-compiler) –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–µ–º–æ—ñ–∑—É—î –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó, –∑–º–µ–Ω—à—É—é—á–∏ –ø–æ—Ç—Ä–µ–±—É —É —Ä—É—á–Ω–∏—Ö –≤–∏–∫–ª–∏–∫–∞—Ö `useCallback`. –í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä, —â–æ–± –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–µ—Ä—É–≤–∞—Ç–∏ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—î—é.
</Note>

<InlineToc />

---

## –û–ø–∏—Å {/*reference*/}

### `useCallback(fn, dependencies)` {/*usecallback*/}

–í–∏–∫–ª–∏—á—Ç–µ `useCallback` –Ω–∞ –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä—ñ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —â–æ–± –∫–µ—à—É–≤–∞—Ç–∏ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏:

```js {4,9}
import { useCallback } from 'react';

export default function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);
```

[–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –±—ñ–ª—å—à–µ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ –Ω–∏–∂—á–µ.](#usage)

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ {/*parameters*/}

* `fn`: –§—É–Ω–∫—Ü—ñ—è, —è–∫—É –≤–∏ —Ö–æ—á–µ—Ç–µ –∫–µ—à—É–≤–∞—Ç–∏. –í–æ–Ω–∞ –º–æ–∂–µ –ø—Ä–∏–π–º–∞—Ç–∏ –±—É–¥—å-—è–∫—ñ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –±—É–¥—å-—è–∫—ñ –∑–Ω–∞—á–µ–Ω–Ω—è. React –ø–æ–≤–µ—Ä–Ω–µ (–∞–ª–µ –Ω–µ –≤–∏–∫–ª–∏—á–µ!) –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é –ø—ñ–¥ —á–∞—Å –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö React –Ω–∞–¥–∞—Å—Ç—å –≤–∞–º —Ç—É —Å–∞–º—É —Ñ—É–Ω–∫—Ü—ñ—é –∑–Ω–æ–≤—É, —è–∫—â–æ `dependencies` –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É. –Ü–Ω–∞–∫—à–µ –≤—ñ–Ω –Ω–∞–¥–∞—Å—Ç—å –≤–∞–º —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—É –≤–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –ø—ñ–¥ —á–∞—Å –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É, —ñ –∑–±–µ—Ä–µ–∂–µ —ó—ó –Ω–∞ –≤–∏–ø–∞–¥–æ–∫, —è–∫—â–æ —ó—ó –º–æ–∂–Ω–∞ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ. React –Ω–µ –≤–∏–∫–ª–∏—á–µ –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é. –§—É–Ω–∫—Ü—ñ—è –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –≤–∞–º, —â–æ–± –≤–∏ –º–æ–≥–ª–∏ –≤–∏—Ä—ñ—à–∏—Ç–∏, –∫–æ–ª–∏ —ñ —á–∏ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —ó—ó.

* `dependencies`: –°–ø–∏—Å–æ–∫ —É—Å—ñ—Ö —Ä–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å, –Ω–∞ —è–∫—ñ –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –∫–æ–¥ `fn`. –†–µ–∞–∫—Ç–∏–≤–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –≤–∫–ª—é—á–∞—é—Ç—å –ø—Ä–æ–ø—Å–∏, —Å—Ç–∞–Ω —Ç–∞ –≤—Å—ñ –∑–º—ñ–Ω–Ω—ñ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó, –æ–≥–æ–ª–æ—à–µ–Ω—ñ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ç—ñ–ª–∞ –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –Ø–∫—â–æ –≤–∞—à –ª—ñ–Ω—Ç–µ—Ä [–Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è React](/learn/editor-setup#linting), –≤—ñ–Ω –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å, —â–æ –∫–æ–∂–Ω–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∫–∞–∑–∞–Ω–æ —è–∫ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å. –°–ø–∏—Å–æ–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –ø–æ—Å—Ç—ñ–π–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —ñ –±—É—Ç–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–º –≤–±—É–¥–æ–≤–∞–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º, —è–∫ `[dep1, dep2, dep3]`. React –ø–æ—Ä—ñ–≤–Ω—è—î –∫–æ–∂–Ω—É –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –∑ —ó—ó –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º –∑–Ω–∞—á–µ–Ω–Ω—è–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è [`Object.is`](https://webdoky.org/uk/docs/Web/JavaScript/Reference/Global_Objects/Object/is).

#### –†–µ–∑—É–ª—å—Ç–∞—Ç {/*returns*/}

–ü—Ä–∏ –ø–æ—á–∞—Ç–∫–æ–≤–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ `useCallback` –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é `fn`, —è–∫—É –≤–∏ –ø–µ—Ä–µ–¥–∞–ª–∏.

–ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö –≤—ñ–Ω –∞–±–æ –ø–æ–≤–µ—Ä–Ω–µ –≤–∂–µ –∑–±–µ—Ä–µ–∂–µ–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é `fn` –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É (—è–∫—â–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è), –∞–±–æ –ø–æ–≤–µ—Ä–Ω–µ —Ñ—É–Ω–∫—Ü—ñ—é `fn`, —è–∫—É –≤–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –ø—ñ–¥ —á–∞—Å —Ü—å–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É.

#### –ó–∞—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è {/*caveats*/}

* `useCallback` ‚Äî —Ü–µ —Ö—É–∫, —Ç–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –π–æ–≥–æ –ª–∏—à–µ **–Ω–∞ –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä—ñ–≤–Ω—ñ –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** –∞–±–æ –≤–∞—à–∏—Ö –≤–ª–∞—Å–Ω–∏—Ö —Ö—É–∫—ñ–≤. –í–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –π–æ–≥–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ü–∏–∫–ª—ñ–≤ –∞–±–æ —É–º–æ–≤. –Ø–∫—â–æ –≤–∞–º —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –≤–∏–Ω–µ—Å—ñ—Ç—å –Ω–æ–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —ñ –ø–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å —Å—Ç–∞–Ω –¥–æ –Ω—å–æ–≥–æ.
* React **–Ω–µ –≤–∏–∫–∏–Ω–µ –∫–µ—à–æ–≤–∞–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—â–æ –Ω–µ–º–∞—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –ø—Ä–∏—á–∏–Ω–∏ –¥–ª—è —Ü—å–æ–≥–æ.** –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —É —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏ React –≤–∏–∫–∏–¥–∞—î –∫–µ—à, –∫–æ–ª–∏ –≤–∏ —Ä–µ–¥–∞–≥—É—î—Ç–µ —Ñ–∞–π–ª –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –Ø–∫ —É —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏, —Ç–∞–∫ —ñ –≤ –ø—É–±–ª—ñ—á–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ React –≤–∏–∫–∏–Ω–µ –∫–µ—à, —è–∫—â–æ –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—è. –£ –º–∞–π–±—É—Ç–Ω—å–æ–º—É React –º–æ–∂–µ –¥–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ —Ñ—É–Ω–∫—Ü—ñ–π, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –ø–µ—Ä–µ–≤–∞–≥–∏ –≤–∏–∫–∏–¥–∞–Ω–Ω—è –∫–µ—à—É ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ React –¥–æ–¥–∞—Å—Ç—å –≤–±—É–¥–æ–≤–∞–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö —Å–ø–∏—Å–∫—ñ–≤ —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É, –±—É–¥–µ –ª–æ–≥—ñ—á–Ω–æ –≤–∏–∫–∏–¥–∞—Ç–∏ –∫–µ—à –¥–ª—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —è–∫—ñ –ø—Ä–æ–∫—Ä—É—á—É—é—Ç—å—Å—è –∑–∞ –º–µ–∂—ñ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É —Ç–∞–±–ª–∏—Ü—ñ. –¶–µ –ø–æ–≤–∏–Ω–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –≤–∞—à–∏–º –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è–º, —è–∫—â–æ –≤–∏ –ø–æ–∫–ª–∞–¥–∞—î—Ç–µ—Å—è –Ω–∞ `useCallback` —è–∫ –Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ. –Ü–Ω–∞–∫—à–µ [–∑–º—ñ–Ω–Ω–∞ —Å—Ç–∞–Ω—É](/reference/react/useState#im-trying-to-set-state-to-a-function-but-it-gets-called-instead) –∞–±–æ [—Ä–µ—Ñ](/reference/react/useRef#avoiding-recreating-the-ref-contents) –º–æ–∂—É—Ç—å –±—É—Ç–∏ –±—ñ–ª—å—à –¥–æ—Ä–µ—á–Ω–∏–º–∏.

---

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è {/*usage*/}

### –ü—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ {/*skipping-re-rendering-of-components*/}

–ö–æ–ª–∏ –≤–∏ –æ–ø—Ç–∏–º—ñ–∑—É—î—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä—É, —ñ–Ω–æ–¥—ñ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∫–µ—à—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫—ñ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ –¥–æ—á—ñ—Ä–Ω—ñ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º. –°–ø–æ—á–∞—Ç–∫—É –ø–æ–¥–∏–≤–∏–º–æ—Å—è –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Ç–æ–≥–æ, —è–∫ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏, –∞ –ø–æ—Ç—ñ–º –ø–æ–±–∞—á–∏–º–æ, —É —è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö —Ü–µ –∫–æ—Ä–∏—Å–Ω–æ.

–©–æ–± –∫–µ—à—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏ –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –æ–±–≥–æ—Ä–Ω—ñ—Ç—å —ó—ó –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤ —Ö—É–∫ `useCallback`:

```js [[3, 4, "handleSubmit"], [2, 9, "[productId, referrer]"]]
import { useCallback } from 'react';

function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);
  // ...
```

–í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –¥–≤—ñ —Ä–µ—á—ñ –¥–æ `useCallback`:

1. –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫—É –≤–∏ —Ö–æ—á–µ—Ç–µ –∫–µ—à—É–≤–∞—Ç–∏ –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏.
2. <CodeStep step={2}>–°–ø–∏—Å–æ–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π</CodeStep>, –≤–∫–ª—é—á–∞—é—á–∏ –∫–æ–∂–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —è–∫–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó.

–ü—Ä–∏ –ø–æ—á–∞—Ç–∫–æ–≤–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ <CodeStep step={3}>–ø–æ–≤–µ—Ä–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è</CodeStep>, —è–∫—É –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –≤—ñ–¥ `useCallback`, –±—É–¥–µ —Ñ—É–Ω–∫—Ü—ñ—î—é, —è–∫—É –≤–∏ –ø–µ—Ä–µ–¥–∞–ª–∏.

–ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö React –ø–æ—Ä—ñ–≤–Ω—è—î <CodeStep step={2}>–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ</CodeStep> –∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏, —è–∫—ñ –≤–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –ø—ñ–¥ —á–∞—Å –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É. –Ø–∫—â–æ –∂–æ–¥–Ω–∞ –∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –Ω–µ –∑–º—ñ–Ω–∏–ª–∞—Å—è (–ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ [`Object.is`](https://webdoky.org/uk/docs/Web/JavaScript/Reference/Global_Objects/Object/is)), `useCallback` –ø–æ–≤–µ—Ä–Ω–µ —Ç—É —Å–∞–º—É —Ñ—É–Ω–∫—Ü—ñ—é, —â–æ –π —Ä–∞–Ω—ñ—à–µ. –Ü–Ω–∞–∫—à–µ `useCallback` –ø–æ–≤–µ—Ä–Ω–µ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—É –≤–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –ø—ñ–¥ —á–∞—Å *—Ü—å–æ–≥–æ* —Ä–µ–Ω–¥–µ—Ä—É.

–Ü–Ω—à–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, `useCallback` –∫–µ—à—É—î —Ñ—É–Ω–∫—Ü—ñ—é –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –ø–æ–∫–∏ —ó—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –Ω–µ –∑–º—ñ–Ω—è—Ç—å—Å—è.

**–î–∞–≤–∞–π—Ç–µ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –ø—Ä–∏–∫–ª–∞–¥, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏, –∫–æ–ª–∏ —Ü–µ –∫–æ—Ä–∏—Å–Ω–æ.**

–°–∫–∞–∂—ñ–º–æ, –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é `handleSubmit` –∑ `ProductPage` –¥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `ShippingForm`:

```js {5}
function ProductPage({ productId, referrer, theme }) {
  // ...
  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
```

–í–∏ –ø–æ–º—ñ—Ç–∏–ª–∏, —â–æ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –ø—Ä–æ–ø–∞ `theme` –Ω–∞ –º–∏—Ç—å –∑–∞–º–æ—Ä–æ–∂—É—î –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫, –∞–ª–µ —è–∫—â–æ –≤–∏ –≤–∏–¥–∞–ª–∏—Ç–µ `<ShippingForm />` –∑ –≤–∞—à–æ–≥–æ JSX, –≤—ñ–Ω –ø—Ä–∞—Ü—é—î —à–≤–∏–¥–∫–æ. –¶–µ –≥–æ–≤–æ—Ä–∏—Ç—å –≤–∞–º, —â–æ –≤–∞—Ä—Ç–æ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm`.

**–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, –∫–æ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è, React –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —É—Å—ñ—Ö –π–æ–≥–æ –¥–æ—á—ñ—Ä–Ω—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ.** –û—Å—å —á–æ–º—É, –∫–æ–ª–∏ `ProductPage` –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∑ —ñ–Ω—à–æ—é `theme`, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` *—Ç–∞–∫–æ–∂* –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è. –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤, —è–∫—ñ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –±–∞–≥–∞—Ç–æ –æ–±—á–∏—Å–ª–µ–Ω—å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É. –ê–ª–µ —è–∫—â–æ –≤–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∏–ª–∏, —â–æ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä –ø–æ–≤—ñ–ª—å–Ω–∏–π, –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç–∏ `ShippingForm` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä, –∫–æ–ª–∏ –π–æ–≥–æ –ø—Ä–æ–ø—Å–∏ —Ç–∞–∫—ñ –∂ —Å–∞–º—ñ, —è–∫ –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ, –æ–±–≥–æ—Ä–Ω—É–≤—à–∏ –π–æ–≥–æ –≤ [`memo`:](/reference/react/memo)

```js {3,5}
import { memo } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  // ...
});
```

**–ó —Ü—ñ—î—é –∑–º—ñ–Ω–æ—é `ShippingForm` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä, —è–∫—â–æ –≤—Å—ñ –π–æ–≥–æ –ø—Ä–æ–ø—Å–∏ *—Ç–∞–∫—ñ –∂ —Å–∞–º—ñ*, —è–∫ –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ.** –û—Å—å –∫–æ–ª–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó —Å—Ç–∞—î –≤–∞–∂–ª–∏–≤–∏–º! –°–∫–∞–∂—ñ–º–æ, –≤–∏ –≤–∏–∑–Ω–∞—á–∏–ª–∏ `handleSubmit` –±–µ–∑ `useCallback`:

```js {2,3,8,12-13}
function ProductPage({ productId, referrer, theme }) {
  // –ö–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏ theme –∑–º—ñ–Ω—é—î—Ç—å—Å—è, —Ü–µ –±—É–¥–µ —ñ–Ω—à–∞ —Ñ—É–Ω–∫—Ü—ñ—è...
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }

  return (
    <div className={theme}>
      {/* ... —Ç–æ–º—É –ø—Ä–æ–ø—Å–∏ ShippingForm –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±—É–¥—É—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–º–∏, —ñ –≤—ñ–Ω –±—É–¥–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏—Å—è –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É */}
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}
```

**–£ JavaScript `function () {}` –∞–±–æ `() => {}` –∑–∞–≤–∂–¥–∏ —Å—Ç–≤–æ—Ä—é—î *—ñ–Ω—à—É* —Ñ—É–Ω–∫—Ü—ñ—é,** –ø–æ–¥—ñ–±–Ω–æ –¥–æ —Ç–æ–≥–æ, —è–∫ –ª—ñ—Ç–µ—Ä–∞–ª –æ–±'—î–∫—Ç–∞ `{}` –∑–∞–≤–∂–¥–∏ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç. –ó–∞–∑–≤–∏—á–∞–π —Ü–µ –Ω–µ –±—É–ª–æ –± –ø—Ä–æ–±–ª–µ–º–æ—é, –∞–ª–µ —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –ø—Ä–æ–ø—Å–∏ `ShippingForm` –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±—É–¥—É—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–º–∏, —ñ –≤–∞—à–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è [`memo`](/reference/react/memo) –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ. –û—Å—å –¥–µ `useCallback` —Å—Ç–∞—î –≤ –Ω–∞–≥–æ–¥—ñ:

```js {2,3,8,12-13}
function ProductPage({ productId, referrer, theme }) {
  // –°–∫–∞–∂—ñ—Ç—å React –∫–µ—à—É–≤–∞—Ç–∏ –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏...
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]); // ...–ø–æ–∫–∏ —Ü—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –Ω–µ –∑–º—ñ–Ω—è—Ç—å—Å—è...

  return (
    <div className={theme}>
      {/* ...ShippingForm –æ—Ç—Ä–∏–º–∞—î —Ç—ñ –∂ —Å–∞–º—ñ –ø—Ä–æ–ø—Å–∏ —ñ –∑–º–æ–∂–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä */}
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}
```

**–û–±–≥–æ—Ä–Ω—É–≤—à–∏ `handleSubmit` –≤ `useCallback`, –≤–∏ –≥–∞—Ä–∞–Ω—Ç—É—î—Ç–µ, —â–æ —Ü–µ *—Ç–∞ —Å–∞–º–∞* —Ñ—É–Ω–∫—Ü—ñ—è –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏** (–ø–æ–∫–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –Ω–µ –∑–º—ñ–Ω—è—Ç—å—Å—è). –í–∏ –Ω–µ *–∑–æ–±–æ–≤'—è–∑–∞–Ω—ñ* –æ–±–≥–æ—Ä—Ç–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –≤ `useCallback`, —è–∫—â–æ –Ω–µ —Ä–æ–±–∏—Ç–µ —Ü–µ –∑ —è–∫–æ—ó—Å—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –ø—Ä–∏—á–∏–Ω–∏. –£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –ø—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º—É, —â–æ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —ó—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –æ–±–≥–æ—Ä–Ω—É—Ç–æ–º—É –≤ [`memo`,](/reference/react/memo) —ñ —Ü–µ –¥–æ–∑–≤–æ–ª—è—î –π–æ–º—É –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä. –Ñ —ñ–Ω—à—ñ –ø—Ä–∏—á–∏–Ω–∏, —á–æ–º—É –≤–∞–º –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è `useCallback`, —è–∫—ñ –æ–ø–∏—Å–∞–Ω—ñ –¥–∞–ª—ñ –Ω–∞ —Ü—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.

<Note>

**–í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞ `useCallback` –ª–∏—à–µ —è–∫ –Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.** –Ø–∫—â–æ –≤–∞—à –∫–æ–¥ –Ω–µ –ø—Ä–∞—Ü—é—î –±–µ–∑ –Ω—å–æ–≥–æ, –∑–Ω–∞–π–¥—ñ—Ç—å –æ—Å–Ω–æ–≤–Ω—É –ø—Ä–æ–±–ª–µ–º—É —ñ –≤–∏–ø—Ä–∞–≤—Ç–µ —ó—ó —Å–ø–æ—á–∞—Ç–∫—É. –ü–æ—Ç—ñ–º –≤–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ `useCallback` –Ω–∞–∑–∞–¥.

</Note>

<DeepDive>

#### –Ø–∫ useCallback –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ useMemo? {/*how-is-usecallback-related-to-usememo*/}

–í–∏ —á–∞—Å—Ç–æ –ø–æ–±–∞—á–∏—Ç–µ [`useMemo`](/reference/react/useMemo) –ø–æ—Ä—É—á –∑ `useCallback`. –û–±–∏–¥–≤–∞ –∫–æ—Ä–∏—Å–Ω—ñ, –∫–æ–ª–∏ –≤–∏ –Ω–∞–º–∞–≥–∞—î—Ç–µ—Å—è –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –¥–æ—á—ñ—Ä–Ω—ñ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –í–æ–Ω–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤–∞–º [–º–µ–º–æ—ñ–∑—É–≤–∞—Ç–∏](https://uk.wikipedia.org/wiki/%D0%9C%D0%B5%D0%BC%D0%BE%D1%96%D0%B7%D0%B0%D1%86%D1%96%D1%8F) (–∞–±–æ, —ñ–Ω—à–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –∫–µ—à—É–≤–∞—Ç–∏) —â–æ—Å—å, —â–æ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ –≤–Ω–∏–∑:

```js {6-8,10-15,19}
import { useMemo, useCallback } from 'react';

function ProductPage({ productId, referrer }) {
  const product = useData('/product/' + productId);

  const requirements = useMemo(() => { // –í–∏–∫–ª–∏–∫–∞—î –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é —ñ –∫–µ—à—É—î —ó—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    return computeRequirements(product);
  }, [product]);

  const handleSubmit = useCallback((orderDetails) => { // –ö–µ—à—É—î —Å–∞–º—É –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);

  return (
    <div className={theme}>
      <ShippingForm requirements={requirements} onSubmit={handleSubmit} />
    </div>
  );
}
```

–†—ñ–∑–Ω–∏—Ü—è –≤ —Ç–æ–º—É, *—â–æ* –≤–æ–Ω–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤–∞–º –∫–µ—à—É–≤–∞—Ç–∏:

* **[`useMemo`](/reference/react/useMemo) –∫–µ—à—É—î *—Ä–µ–∑—É–ª—å—Ç–∞—Ç* –≤–∏–∫–ª–∏–∫—É –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó.** –£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –≤—ñ–Ω –∫–µ—à—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–ª–∏–∫—É `computeRequirements(product)`, —Ç–æ–º—É —â–æ –≤—ñ–Ω –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è, –ø–æ–∫–∏ `product` –Ω–µ –∑–º—ñ–Ω–∏—Ç—å—Å—è. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∞–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –æ–±'—î–∫—Ç `requirements` –≤–Ω–∏–∑ –±–µ–∑ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É `ShippingForm`. –ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ, React –≤–∏–∫–ª–∏—á–µ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—É –≤–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –ø—ñ–¥ —á–∞—Å —Ä–µ–Ω–¥–µ—Ä—É, —â–æ–± –æ–±—á–∏—Å–ª–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
* **`useCallback` –∫–µ—à—É—î *—Å–∞–º—É —Ñ—É–Ω–∫—Ü—ñ—é*.** –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ `useMemo`, –≤—ñ–Ω –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—É –≤–∏ –Ω–∞–¥–∞—î—Ç–µ. –ù–∞—Ç–æ–º—ñ—Å—Ç—å –≤—ñ–Ω –∫–µ—à—É—î —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—É –≤–∏ –Ω–∞–¥–∞–ª–∏, —Ç–æ–º—É —â–æ `handleSubmit` *—Å–∞–º–∞* –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è, –ø–æ–∫–∏ `productId` –∞–±–æ `referrer` –Ω–µ –∑–º—ñ–Ω—è—Ç—å—Å—è. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∞–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `handleSubmit` –≤–Ω–∏–∑ –±–µ–∑ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É `ShippingForm`. –í–∞—à –∫–æ–¥ –Ω–µ –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è, –ø–æ–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É.

–Ø–∫—â–æ –≤–∏ –≤–∂–µ –∑–Ω–∞–π–æ–º—ñ –∑ [`useMemo`,](/reference/react/useMemo) –≤–∞–º –º–æ–∂–µ –±—É—Ç–∏ –∫–æ—Ä–∏—Å–Ω–æ –¥—É–º–∞—Ç–∏ –ø—Ä–æ `useCallback` —è–∫ –ø—Ä–æ —Ü–µ:

```js {expectedErrors: {'react-compiler': [3]}}
// –°–ø—Ä–æ—â–µ–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ React)
function useCallback(fn, dependencies) {
  return useMemo(() => fn, dependencies);
}
```

[–î—ñ–∑–Ω–∞–π—Ç–µ—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ `useMemo` —ñ `useCallback`.](/reference/react/useMemo#memoizing-a-function)

</DeepDive>

<DeepDive>

#### –ß–∏ —Å–ª—ñ–¥ –¥–æ–¥–∞–≤–∞—Ç–∏ useCallback —Å–∫—Ä—ñ–∑—å? {/*should-you-add-usecallback-everywhere*/}

–Ø–∫—â–æ –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ —Å—Ö–æ–∂–∏–π –Ω–∞ —Ü–µ–π —Å–∞–π—Ç, —ñ –±—ñ–ª—å—à—ñ—Å—Ç—å –≤–∑–∞—î–º–æ–¥—ñ–π –≥—Ä—É–±—ñ (—è–∫ –∑–∞–º—ñ–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∞–±–æ —Ü—ñ–ª–æ–≥–æ —Ä–æ–∑–¥—ñ–ª—É), –º–µ–º–æ—ñ–∑–∞—Ü—ñ—è –∑–∞–∑–≤–∏—á–∞–π –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞. –ó —ñ–Ω—à–æ–≥–æ –±–æ–∫—É, —è–∫—â–æ –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –±—ñ–ª—å—à–µ —Å—Ö–æ–∂–∏–π –Ω–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä –º–∞–ª—é–Ω–∫—ñ–≤, —ñ –±—ñ–ª—å—à—ñ—Å—Ç—å –≤–∑–∞—î–º–æ–¥—ñ–π –¥–µ—Ç–∞–ª—å–Ω—ñ (—è–∫ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è —Ñ—ñ–≥—É—Ä), —Ç–æ–¥—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—é –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–æ—é.

–ö–µ—à—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –∑ `useCallback` —Ü—ñ–Ω–Ω–µ –ª–∏—à–µ –≤ –∫—ñ–ª—å–∫–æ—Ö –≤–∏–ø–∞–¥–∫–∞—Ö:

- –í–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —ó—ó —è–∫ –ø—Ä–æ–ø –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –æ–±–≥–æ—Ä–Ω—É—Ç–æ–º—É –≤ [`memo`.](/reference/react/memo) –í–∏ —Ö–æ—á–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä, —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ –∑–º—ñ–Ω–∏–ª–æ—Å—è. –ú–µ–º–æ—ñ–∑–∞—Ü—ñ—è –¥–æ–∑–≤–æ–ª—è—î –≤–∞—à–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏—Å—è –ª–∏—à–µ —è–∫—â–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑–º—ñ–Ω–∏–ª–∏—Å—è.
- –§—É–Ω–∫—Ü—ñ—è, —è–∫—É –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ, –ø—ñ–∑–Ω—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —è–∫–æ–≥–æ—Å—å —Ö—É–∫–∞. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —ñ–Ω—à–∞ —Ñ—É–Ω–∫—Ü—ñ—è, –æ–±–≥–æ—Ä–Ω—É—Ç–∞ –≤ `useCallback`, –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –Ω–µ—ó, –∞–±–æ –≤–∏ –∑–∞–ª–µ–∂–∏—Ç–µ –≤—ñ–¥ —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó –≤ [`useEffect`.](/reference/react/useEffect)

–ù–µ–º–∞—î –ø–µ—Ä–µ–≤–∞–≥ –≤—ñ–¥ –æ–±–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –≤ `useCallback` –≤ —ñ–Ω—à–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö. –ù–µ–º–∞—î —Ç–∞–∫–æ–∂ –∑–Ω–∞—á–Ω–æ—ó —à–∫–æ–¥–∏ –≤—ñ–¥ —Ü—å–æ–≥–æ, —Ç–æ–º—É –¥–µ—è–∫—ñ –∫–æ–º–∞–Ω–¥–∏ –≤–∏–±–∏—Ä–∞—é—Ç—å –Ω–µ –¥—É–º–∞—Ç–∏ –ø—Ä–æ –æ–∫—Ä–µ–º—ñ –≤–∏–ø–∞–¥–∫–∏ —ñ –º–µ–º–æ—ñ–∑—É—é—Ç—å —è–∫–Ω–∞–π–±—ñ–ª—å—à–µ. –ù–µ–¥–æ–ª—ñ–∫ —É —Ç–æ–º—É, —â–æ –∫–æ–¥ —Å—Ç–∞—î –º–µ–Ω—à —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º. –¢–∞–∫–æ–∂ –Ω–µ –≤—Å—è –º–µ–º–æ—ñ–∑–∞—Ü—ñ—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∞: –æ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ "–∑–∞–≤–∂–¥–∏ –Ω–æ–≤–µ", –¥–æ—Å—Ç–∞—Ç–Ω—å–æ, —â–æ–± –∑–ª–∞–º–∞—Ç–∏ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—é –¥–ª—è –≤—Å—å–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ `useCallback` –Ω–µ –∑–∞–ø–æ–±—ñ–≥–∞—î *—Å—Ç–≤–æ—Ä–µ–Ω–Ω—é* —Ñ—É–Ω–∫—Ü—ñ—ó. –í–∏ –∑–∞–≤–∂–¥–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é (—ñ —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!), –∞–ª–µ React —ñ–≥–Ω–æ—Ä—É—î —ó—ó —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –≤–∞–º –∫–µ—à–æ–≤–∞–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–º—ñ–Ω–∏–ª–æ—Å—è.

**–ù–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ –±–∞–≥–∞—Ç–æ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–æ—é, –¥–æ—Ç—Ä–∏–º—É—é—á–∏—Å—å –∫—ñ–ª—å–∫–æ—Ö –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤:**

1. –ö–æ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ñ–∑—É–∞–ª—å–Ω–æ –æ–±–≥–æ—Ä—Ç–∞—î —ñ–Ω—à—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, –¥–æ–∑–≤–æ–ª—å—Ç–µ –π–æ–º—É [–ø—Ä–∏–π–º–∞—Ç–∏ JSX —è–∫ –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏.](/learn/passing-props-to-a-component#passing-jsx-as-children) –¢–æ–¥—ñ, —è–∫—â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-–æ–±–≥–æ—Ä—Ç–∫–∞ –æ–Ω–æ–≤–ª—é—î —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π —Å—Ç–∞–Ω, React –∑–Ω–∞—î, —â–æ –π–æ–≥–æ –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É.
2. –í—ñ–¥–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–≤–∞–≥—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å—Ç–∞–Ω—É —ñ –Ω–µ [–ø—ñ–¥–Ω—ñ–º–∞–π—Ç–µ —Å—Ç–∞–Ω](/learn/sharing-state-between-components) –¥–∞–ª—ñ, –Ω—ñ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ. –ù–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç–∏–º—á–∞—Å–æ–≤–∏–π —Å—Ç–∞–Ω, —è–∫ —Ñ–æ—Ä–º–∏ —ñ —á–∏ –Ω–∞–≤–µ–¥–µ–Ω–æ –∫—É—Ä—Å–æ—Ä –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç, –Ω–∞ –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä—ñ–≤–Ω—ñ –≤–∞—à–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –∞–±–æ –≤ –≥–ª–æ–±–∞–ª—å–Ω—ñ–π –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ —Å—Ç–∞–Ω—É.
3. –¢—Ä–∏–º–∞–π—Ç–µ –≤–∞—à—É [–ª–æ–≥—ñ–∫—É —Ä–µ–Ω–¥–µ—Ä—É —á–∏—Å—Ç–æ—é.](/learn/keeping-components-pure) –Ø–∫—â–æ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î –ø—Ä–æ–±–ª–µ–º—É –∞–±–æ —Å—Ç–≤–æ—Ä—é—î —è–∫–∏–π—Å—å –ø–æ–º—ñ—Ç–Ω–∏–π –≤—ñ–∑—É–∞–ª—å–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, —Ü–µ –ø–æ–º–∏–ª–∫–∞ —É –≤–∞—à–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ! –í–∏–ø—Ä–∞–≤—Ç–µ –ø–æ–º–∏–ª–∫—É –∑–∞–º—ñ—Å—Ç—å –¥–æ–¥–∞–≤–∞–Ω–Ω—è –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó.
4. –£–Ω–∏–∫–∞–π—Ç–µ [–Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤, —è–∫—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å —Å—Ç–∞–Ω.](/learn/you-might-not-need-an-effect) –ë—ñ–ª—å—à—ñ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º –∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é –≤ React –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∞—Ö –≤–∏–∫–ª–∏–∫–∞–Ω—ñ –ª–∞–Ω—Ü—é–∂–∫–∞–º–∏ –æ–Ω–æ–≤–ª–µ–Ω—å, —â–æ –ø–æ—Ö–æ–¥—è—Ç—å –≤—ñ–¥ –µ—Ñ–µ–∫—Ç—ñ–≤, —è–∫—ñ –∑–º—É—à—É—é—Ç—å –≤–∞—à—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏—Å—è –∑–Ω–æ–≤—É —ñ –∑–Ω–æ–≤—É.
5. –ù–∞–º–∞–≥–∞–π—Ç–µ—Å—è [–≤–∏–¥–∞–ª–∏—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ –≤–∞—à–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤.](/learn/removing-effect-dependencies) –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞–º—ñ—Å—Ç—å –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó —á–∞—Å—Ç–æ –ø—Ä–æ—Å—Ç—ñ—à–µ –ø–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ —è–∫–∏–π—Å—å –æ–±'—î–∫—Ç –∞–±–æ —Ñ—É–Ω–∫—Ü—ñ—é –≤—Å–µ—Ä–µ–¥–∏–Ω—É –µ—Ñ–µ–∫—Ç—É –∞–±–æ –ø–æ–∑–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

–Ø–∫—â–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –≤–∑–∞—î–º–æ–¥—ñ—è –≤—Å–µ —â–µ –∑–¥–∞—î—Ç—å—Å—è –ø–æ–≤—ñ–ª—å–Ω–æ—é, [–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ React](https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html), —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏, —è–∫—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –æ—Ç—Ä–∏–º—É—é—Ç—å –Ω–∞–π–±—ñ–ª—å—à—É –∫–æ—Ä–∏—Å—Ç—å –≤—ñ–¥ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó, —ñ –¥–æ–¥–∞–π—Ç–µ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—é —Ç–∞–º, –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ. –¶—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ —Ä–æ–±–ª—è—Ç—å –≤–∞—à—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ª–µ–≥—à–∏–º–∏ –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —ñ —Ä–æ–∑—É–º—ñ–Ω–Ω—è, —Ç–æ–º—É –¥–æ–±—Ä–µ –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è —ó—Ö —É –±—É–¥—å-—è–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É. –£ –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ñ –º–∏ –¥–æ—Å–ª—ñ–¥–∂—É—î–º–æ [–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É –º–µ–º–æ—ñ–∑–∞—Ü—ñ—é](https://www.youtube.com/watch?v=lGEMwh32soc), —â–æ–± –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü–µ —Ä–∞–∑ —ñ –Ω–∞–∑–∞–≤–∂–¥–∏.

</DeepDive>

<Recipes titleText="–†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ useCallback —ñ –ø—Ä—è–º–∏–º –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è–º —Ñ—É–Ω–∫—Ü—ñ—ó" titleId="examples-rerendering">

#### –ü—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É –∑ `useCallback` —ñ `memo` {/*skipping-re-rendering-with-usecallback-and-memo*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` **—à—Ç—É—á–Ω–æ —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–∏–π**, —â–æ–± –≤–∏ –º–æ–≥–ª–∏ –ø–æ–±–∞—á–∏—Ç–∏, —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —è–∫–∏–π –≤–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–µ, —Å–ø—Ä–∞–≤–¥—ñ –ø–æ–≤—ñ–ª—å–Ω–∏–π. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–±—ñ–ª—å—à–∏—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ —ñ –ø–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É.

–ó–±—ñ–ª—å—à–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ –∑–¥–∞—î—Ç—å—Å—è –ø–æ–≤—ñ–ª—å–Ω–∏–º, —Ç–æ–º—É —â–æ –≤–æ–Ω–æ –∑–º—É—à—É—î —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–∏–π `ShippingForm` –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏—Å—è. –¶–µ –æ—á—ñ–∫—É–≤–∞–Ω–æ, —Ç–æ–º—É —â–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∑–º—ñ–Ω–∏–≤—Å—è, —ñ —Ç–æ–º—É –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –Ω–æ–≤–∏–π –≤–∏–±—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

–î–∞–ª—ñ —Å–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É. **–ó–∞–≤–¥—è–∫–∏ `useCallback` —Ä–∞–∑–æ–º –∑ [`memo`](/reference/react/memo), —Ü–µ —à–≤–∏–¥–∫–æ, –Ω–µ–∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ —à—Ç—É—á–Ω–µ —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–Ω—è!** `ShippingForm` –ø—Ä–æ–ø—É—Å—Ç–∏–≤ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä, —Ç–æ–º—É —â–æ —Ñ—É–Ω–∫—Ü—ñ—è `handleSubmit` –Ω–µ –∑–º—ñ–Ω–∏–ª–∞—Å—è. –§—É–Ω–∫—Ü—ñ—è `handleSubmit` –Ω–µ –∑–º—ñ–Ω–∏–ª–∞—Å—è, —Ç–æ–º—É —â–æ —ñ `productId`, —ñ `referrer` (–≤–∞—à—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ `useCallback`) –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢–µ–º–Ω–∏–π —Ä–µ–∂–∏–º
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import { useCallback } from 'react';
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
  // –£—è–≤—ñ–º–æ, —â–æ —Ü–µ –Ω–∞–¥—Å–∏–ª–∞—î –∑–∞–ø–∏—Ç....
  console.log('POST /' + url);
  console.log(data);
}
```

```js {expectedErrors: {'react-compiler': [7, 8]}} src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('[–®–¢–£–ß–ù–û –°–ü–û–í–Ü–õ–¨–ù–ï–ù–û] –†–µ–Ω–¥–µ—Ä <ShippingForm />');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // –ù—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç–∏ 500 –º—Å, —â–æ–± —ñ–º—ñ—Ç—É–≤–∞—Ç–∏ –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –ø–æ–≤—ñ–ª—å–Ω–∏–π –∫–æ–¥
  }

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <p><b>–ü—Ä–∏–º—ñ—Ç–∫–∞: <code>ShippingForm</code> —à—Ç—É—á–Ω–æ —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–∏–π!</b></p>
      <label>
        –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:
        <button type="button" onClick={() => setCount(count - 1)}>‚Äì</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        –í—É–ª–∏—Ü—è:
        <input name="street" />
      </label>
      <label>
        –ú—ñ—Å—Ç–æ:
        <input name="city" />
      </label>
      <label>
        –ü–æ—à—Ç–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å:
        <input name="zipCode" />
      </label>
      <button type="submit">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

<Solution />

#### –ó–∞–≤–∂–¥–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç {/*always-re-rendering-a-component*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `ShippingForm` —Ç–∞–∫–æ–∂ **—à—Ç—É—á–Ω–æ —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–∞**, —â–æ–± –≤–∏ –º–æ–≥–ª–∏ –ø–æ–±–∞—á–∏—Ç–∏, —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ —è–∫–∏–π—Å—å React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —è–∫–∏–π –≤–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–µ, —Å–ø—Ä–∞–≤–¥—ñ –ø–æ–≤—ñ–ª—å–Ω–∏–π. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–±—ñ–ª—å—à–∏—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ —ñ –ø–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É.

–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø—Ä–∏–∫–ª–∞–¥—É, –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ç–µ–º–∏ —Ç–µ–ø–µ—Ä —Ç–∞–∫–æ–∂ –ø–æ–≤—ñ–ª—å–Ω–µ! –¶–µ —Ç–æ–º—É, —â–æ **–≤ —Ü—ñ–π –≤–µ—Ä—Å—ñ—ó –Ω–µ–º–∞—î –≤–∏–∫–ª–∏–∫—É `useCallback`**, —Ç–æ–º—É `handleSubmit` –∑–∞–≤–∂–¥–∏ –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è, —ñ —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` –Ω–µ –º–æ–∂–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢–µ–º–Ω–∏–π —Ä–µ–∂–∏–º
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
  // –£—è–≤—ñ–º–æ, —â–æ —Ü–µ –Ω–∞–¥—Å–∏–ª–∞—î –∑–∞–ø–∏—Ç...
  console.log('POST /' + url);
  console.log(data);
}
```

```js {expectedErrors: {'react-compiler': [7, 8]}} src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('[–®–¢–£–ß–ù–û –°–ü–û–í–Ü–õ–¨–ù–ï–ù–û] –†–µ–Ω–¥–µ—Ä <ShippingForm />');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // –ù—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç–∏ 500 –º—Å, —â–æ–± —ñ–º—ñ—Ç—É–≤–∞—Ç–∏ –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –ø–æ–≤—ñ–ª—å–Ω–∏–π –∫–æ–¥
  }

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <p><b>–ü—Ä–∏–º—ñ—Ç–∫–∞: <code>ShippingForm</code> —à—Ç—É—á–Ω–æ —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–∏–π!</b></p>
      <label>
        –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:
        <button type="button" onClick={() => setCount(count - 1)}>‚Äì</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        –í—É–ª–∏—Ü—è:
        <input name="street" />
      </label>
      <label>
        –ú—ñ—Å—Ç–æ:
        <input name="city" />
      </label>
      <label>
        –ü–æ—à—Ç–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å:
        <input name="zipCode" />
      </label>
      <button type="submit">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>


–û–¥–Ω–∞–∫ –æ—Å—å —Ç–æ–π —Å–∞–º–∏–π –∫–æ–¥ **–∑ –≤–∏–¥–∞–ª–µ–Ω–∏–º —à—Ç—É—á–Ω–∏–º —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–Ω—è–º.** –ß–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç—å—Å—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å `useCallback` –ø–æ–º—ñ—Ç–Ω–æ—é —á–∏ –Ω—ñ?

<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢–µ–º–Ω–∏–π —Ä–µ–∂–∏–º
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
  // –£—è–≤—ñ–º–æ, —â–æ —Ü–µ –Ω–∞–¥—Å–∏–ª–∞—î –∑–∞–ø–∏—Ç...
  console.log('POST /' + url);
  console.log(data);
}
```

```js src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('–†–µ–Ω–¥–µ—Ä <ShippingForm />');

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <label>
        –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:
        <button type="button" onClick={() => setCount(count - 1)}>‚Äì</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        –í—É–ª–∏—Ü—è:
        <input name="street" />
      </label>
      <label>
        –ú—ñ—Å—Ç–æ:
        <input name="city" />
      </label>
      <label>
        –ü–æ—à—Ç–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å:
        <input name="zipCode" />
      </label>
      <button type="submit">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>


–î–æ—Å–∏—Ç—å —á–∞—Å—Ç–æ –∫–æ–¥ –±–µ–∑ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó –ø—Ä–∞—Ü—é—î –¥–æ–±—Ä–µ. –Ø–∫—â–æ –≤–∞—à—ñ –≤–∑–∞—î–º–æ–¥—ñ—ó –¥–æ—Å–∏—Ç—å —à–≤–∏–¥–∫—ñ, –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—è.

–ü–∞–º'—è—Ç–∞–π—Ç–µ, —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ React —É —Ä–µ–∂–∏–º—ñ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞, –≤–∏–º–∫–Ω—É—Ç–∏ [—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ React](/learn/react-developer-tools) —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–∏—Å—Ç—Ä–æ—ó, —Å—Ö–æ–∂—ñ –Ω–∞ —Ç—ñ, —è–∫—ñ –º–∞—é—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –≤–∞—à–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–µ —É—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ —Ç–µ, —â–æ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ —Å–ø–æ–≤—ñ–ª—å–Ω—é—î –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫.

<Solution />

</Recipes>

---

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –∑ –º–µ–º–æ—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ–ª–±–µ–∫–∞ {/*updating-state-from-a-memoized-callback*/}

–Ü–Ω–æ–¥—ñ –≤–∞–º –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É –∑ –º–µ–º–æ—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ–ª–±–µ–∫–∞.

–¶—è —Ñ—É–Ω–∫—Ü—ñ—è `handleAddTodo` –≤–∫–∞–∑—É—î `todos` —è–∫ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å, —Ç–æ–º—É —â–æ –≤–æ–Ω–∞ –æ–±—á–∏—Å–ª—é—î –Ω–∞—Å—Ç—É–ø–Ω—ñ todos –∑ –Ω–µ—ó:

```js {6,7}
function TodoList() {
  const [todos, setTodos] = useState([]);

  const handleAddTodo = useCallback((text) => {
    const newTodo = { id: nextId++, text };
    setTodos([...todos, newTodo]);
  }, [todos]);
  // ...
```

–ó–∞–∑–≤–∏—á–∞–π –≤–∏ —Ö–æ—á–µ—Ç–µ, —â–æ–± –º–µ–º–æ—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –º–∞–ª–∏ —è–∫–æ–º–æ–≥–∞ –º–µ–Ω—à–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π. –ö–æ–ª–∏ –≤–∏ —á–∏—Ç–∞—î—Ç–µ —è–∫–∏–π—Å—å —Å—Ç–∞–Ω –ª–∏—à–µ –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Å—Ç–∞–Ω—É, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü—é –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å, –ø–µ—Ä–µ–¥–∞–≤—à–∏ [—Ñ—É–Ω–∫—Ü—ñ—é –æ–Ω–æ–≤–ª–µ–Ω–Ω—è](/reference/react/useState#updating-state-based-on-the-previous-state) –∑–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ:

```js {6,7}
function TodoList() {
  const [todos, setTodos] = useState([]);

  const handleAddTodo = useCallback((text) => {
    const newTodo = { id: nextId++, text };
    setTodos(todos => [...todos, newTodo]);
  }, []); // ‚úÖ –ù–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ todos
  // ...
```

–¢—É—Ç –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± —Ä–æ–±–∏—Ç–∏ `todos` –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—é —ñ —á–∏—Ç–∞—Ç–∏ —ó—ó –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ, –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –ø—Ä–æ —Ç–µ, *—è–∫* –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω (`todos => [...todos, newTodo]`) –¥–æ React. [–î—ñ–∑–Ω–∞–π—Ç–µ—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ —Ñ—É–Ω–∫—Ü—ñ—ó –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.](/reference/react/useState#updating-state-based-on-the-previous-state)

---

### –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∑–∞–Ω–∞–¥—Ç–æ —á–∞—Å—Ç–∏–º —Å–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è–º –µ—Ñ–µ–∫—Ç—É {/*preventing-an-effect-from-firing-too-often*/}

–Ü–Ω–æ–¥—ñ –≤–∞–º –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –∑—Å–µ—Ä–µ–¥–∏–Ω–∏ [e—Ñ–µ–∫—Ç—É:](/learn/synchronizing-with-effects)

```js {4-9,12}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  function createOptions() {
    return {
      serverUrl: 'https://localhost:1234',
      roomId: roomId
    };
  }

  useEffect(() => {
    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    // ...
```

–¶–µ —Å—Ç–≤–æ—Ä—é—î –ø—Ä–æ–±–ª–µ–º—É. [–ö–æ–∂–Ω–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–æ —è–∫ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤–∞—à–æ–≥–æ –µ—Ñ–µ–∫—Ç—É.](/learn/lifecycle-of-reactive-effects#react-verifies-that-you-specified-every-reactive-value-as-a-dependency) –û–¥–Ω–∞–∫, —è–∫—â–æ –≤–∏ –æ–≥–æ–ª–æ—Å–∏—Ç–µ `createOptions` —è–∫ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å, —Ü–µ –∑–º—É—Å–∏—Ç—å –≤–∞—à –µ—Ñ–µ–∫—Ç –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–µ—Ä–µ–ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—è –¥–æ —á–∞—Ç-–∫—ñ–º–Ω–∞—Ç–∏:


```js {6}
  useEffect(() => {
    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [createOptions]); // üî¥ –ü—Ä–æ–±–ª–µ–º–∞: —Ü—è –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å –∫–æ–∂–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞
  // ...
```

–©–æ–± –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü–µ, –≤–∏ –º–æ–∂–µ—Ç–µ –æ–±–≥–æ—Ä–Ω—É—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—É –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∑ –µ—Ñ–µ–∫—Ç—É, –≤ `useCallback`:

```js {4-9,16}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const createOptions = useCallback(() => {
    return {
      serverUrl: 'https://localhost:1234',
      roomId: roomId
    };
  }, [roomId]); // ‚úÖ –ó–º—ñ–Ω—é—î—Ç—å—Å—è –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –∑–º—ñ–Ω—é—î—Ç—å—Å—è roomId

  useEffect(() => {
    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [createOptions]); // ‚úÖ –ó–º—ñ–Ω—é—î—Ç—å—Å—è –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –∑–º—ñ–Ω—é—î—Ç—å—Å—è createOptions
  // ...
```

–¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Ñ—É–Ω–∫—Ü—ñ—è `createOptions` –æ–¥–Ω–∞–∫–æ–≤–∞ –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, —è–∫—â–æ `roomId` –æ–¥–Ω–∞–∫–æ–≤–∏–π. **–û–¥–Ω–∞–∫ —â–µ –∫—Ä–∞—â–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –ø–æ—Ç—Ä–µ–±—É –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ñ—É–Ω–∫—Ü—ñ—ó.** –ü–µ—Ä–µ–º—ñ—Å—Ç—ñ—Ç—å –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é *–≤—Å–µ—Ä–µ–¥–∏–Ω—É* –µ—Ñ–µ–∫—Ç—É:

```js {5-10,16}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    function createOptions() { // ‚úÖ –ù–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ –≤ useCallback –∞–±–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è—Ö —Ñ—É–Ω–∫—Ü—ñ—ó!
      return {
        serverUrl: 'https://localhost:1234',
        roomId: roomId
      };
    }

    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // ‚úÖ –ó–º—ñ–Ω—é—î—Ç—å—Å—è –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –∑–º—ñ–Ω—é—î—Ç—å—Å—è roomId
  // ...
```

–¢–µ–ø–µ—Ä –≤–∞—à –∫–æ–¥ –ø—Ä–æ—Å—Ç—ñ—à–∏–π —ñ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î `useCallback`. [–î—ñ–∑–Ω–∞–π—Ç–µ—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –µ—Ñ–µ–∫—Ç—É.](/learn/removing-effect-dependencies#move-dynamic-objects-and-functions-inside-your-effect)

---

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –≤–ª–∞—Å–Ω–æ–≥–æ —Ö—É–∫–∞ {/*optimizing-a-custom-hook*/}

–Ø–∫—â–æ –≤–∏ –ø–∏—à–µ—Ç–µ [–≤–ª–∞—Å–Ω–∏–π —Ö—É–∫,](/learn/reusing-logic-with-custom-hooks) —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –æ–±–≥–æ—Ä–Ω—É—Ç–∏ –±—É–¥—å-—è–∫—ñ —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫—ñ –≤—ñ–Ω –ø–æ–≤–µ—Ä—Ç–∞—î, –≤ `useCallback`:

```js {4-6,8-10}
function useRouter() {
  const { dispatch } = useContext(RouterStateContext);

  const navigate = useCallback((url) => {
    dispatch({ type: 'navigate', url });
  }, [dispatch]);

  const goBack = useCallback(() => {
    dispatch({ type: 'back' });
  }, [dispatch]);

  return {
    navigate,
    goBack,
  };
}
```

–¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Å–ø–æ–∂–∏–≤–∞—á—ñ –≤–∞—à–æ–≥–æ —Ö—É–∫–∞ –º–æ–∂—É—Ç—å –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π –∫–æ–¥, –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

---

## –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è {/*troubleshooting*/}

### –ö–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏ –º—ñ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è, `useCallback` –ø–æ–≤–µ—Ä—Ç–∞—î —ñ–Ω—à—É —Ñ—É–Ω–∫—Ü—ñ—é {/*every-time-my-component-renders-usecallback-returns-a-different-function*/}

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –≤–∫–∞–∑–∞–ª–∏ –º–∞—Å–∏–≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —è–∫ –¥—Ä—É–≥–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç!

–Ø–∫—â–æ –≤–∏ –∑–∞–±—É–¥–µ—Ç–µ –º–∞—Å–∏–≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π, `useCallback` –ø–æ–≤–µ—Ä–Ω–µ –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É:

```js {7}
function ProductPage({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }); // üî¥ –ü–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É: –Ω–µ–º–∞—î –º–∞—Å–∏–≤—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
  // ...
```

–û—Å—å –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è, —â–æ –ø–µ—Ä–µ–¥–∞—î –º–∞—Å–∏–≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —è–∫ –¥—Ä—É–≥–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç:

```js {7}
function ProductPage({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]); // ‚úÖ –ù–µ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é –±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏
  // ...
```

–Ø–∫—â–æ —Ü–µ –Ω–µ –¥–æ–ø–æ–º–∞–≥–∞—î, —Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º—É, —â–æ –ø—Ä–∏–Ω–∞–π–º–Ω—ñ –æ–¥–Ω–∞ –∑ –≤–∞—à–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É. –í–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ª–∞–≥–æ–¥–∏—Ç–∏ —Ü—é –ø—Ä–æ–±–ª–µ–º—É, –≤—Ä—É—á–Ω—É –≤–∏–≤–æ–¥—è—á–∏ –≤–∞—à—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤ –∫–æ–Ω—Å–æ–ª—å:

```js {5}
  const handleSubmit = useCallback((orderDetails) => {
    // ..
  }, [productId, referrer]);

  console.log([productId, referrer]);
```

–ü–æ—Ç—ñ–º –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –ø—Ä–∞–≤–æ—é –∫–Ω–æ–ø–∫–æ—é –º–∏—à—ñ –Ω–∞ –º–∞—Å–∏–≤–∏ –∑ —Ä—ñ–∑–Ω–∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä—ñ–≤ —É –∫–æ–Ω—Å–æ–ª—ñ —ñ –≤–∏–±—Ä–∞—Ç–∏ "Store as a global variable" –¥–ª—è –æ–±–æ—Ö –∑ –Ω–∏—Ö. –ü—Ä–∏–ø—É—Å–∫–∞—é—á–∏, —â–æ –ø–µ—Ä—à–∏–π –∑–±–µ—Ä–µ–∂–µ–Ω–æ —è–∫ `temp1`, –∞ –¥—Ä—É–≥–∏–π —è–∫ `temp2`, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –∫–æ–∂–Ω–∞ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤ –æ–±–æ—Ö –º–∞—Å–∏–≤–∞—Ö –æ–¥–Ω–∞–∫–æ–≤–∞:

```js
Object.is(temp1[0], temp2[0]); // –ß–∏ –ø–µ—Ä—à–∞ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∞ –º—ñ–∂ –º–∞—Å–∏–≤–∞–º–∏?
Object.is(temp1[1], temp2[1]); // –ß–∏ –¥—Ä—É–≥–∞ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∞ –º—ñ–∂ –º–∞—Å–∏–≤–∞–º–∏?
Object.is(temp1[2], temp2[2]); // ... —ñ —Ç–∞–∫ –¥–∞–ª—ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ ...
```

–ö–æ–ª–∏ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ, —è–∫–∞ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –ª–∞–º–∞—î –º–µ–º–æ—ñ–∑–∞—Ü—ñ—é, –∞–±–æ –∑–Ω–∞–π–¥—ñ—Ç—å —Å–ø–æ—Å—ñ–± –≤–∏–¥–∞–ª–∏—Ç–∏ —ó—ó, –∞–±–æ [–º–µ–º–æ—ñ–∑—É–π—Ç–µ —ó—ó —Ç–∞–∫–æ–∂.](/reference/react/useMemo#memoizing-a-dependency-of-another-hook)

---

### –ú–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `useCallback` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫—É –≤ —Ü–∏–∫–ª—ñ, –∞–ª–µ —Ü–µ –Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω–æ {/*i-need-to-call-usememo-for-each-list-item-in-a-loop-but-its-not-allowed*/}

–ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Chart` –æ–±–≥–æ—Ä–Ω—É—Ç–∏–π –≤ [`memo`](/reference/react/memo). –í–∏ —Ö–æ—á–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–∂–Ω–æ–≥–æ `Chart` —É —Å–ø–∏—Å–∫—É, –∫–æ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ReportList` –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è. –û–¥–Ω–∞–∫ –≤–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `useCallback` –≤ —Ü–∏–∫–ª—ñ:

```js {expectedErrors: {'react-compiler': [6]}} {5-14}
function ReportList({ items }) {
  return (
    <article>
      {items.map(item => {
        // üî¥ –í–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ useCallback –≤ —Ü–∏–∫–ª—ñ —Ç–∞–∫–∏–º —á–∏–Ω–æ–º:
        const handleClick = useCallback(() => {
          sendReport(item)
        }, [item]);

        return (
          <figure key={item.id}>
            <Chart onClick={handleClick} />
          </figure>
        );
      })}
    </article>
  );
}
```

–ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –≤–∏–Ω–µ—Å—ñ—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ–∫—Ä–µ–º–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ —ñ –ø–æ–º—ñ—Å—Ç—ñ—Ç—å `useCallback` —Ç—É–¥–∏:

```js {5,12-21}
function ReportList({ items }) {
  return (
    <article>
      {items.map(item =>
        <Report key={item.id} item={item} />
      )}
    </article>
  );
}

function Report({ item }) {
  // ‚úÖ –í–∏–∫–ª–∏–∫–∞–π—Ç–µ useCallback –Ω–∞ –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä—ñ–≤–Ω—ñ:
  const handleClick = useCallback(() => {
    sendReport(item)
  }, [item]);

  return (
    <figure>
      <Chart onClick={handleClick} />
    </figure>
  );
}
```

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ `useCallback` –≤ –æ—Å—Ç–∞–Ω–Ω—å–æ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ —ñ –∑–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –æ–±–≥–æ—Ä–Ω—É—Ç–∏ —Å–∞–º `Report` –≤ [`memo`.](/reference/react/memo) –Ø–∫—â–æ –ø—Ä–æ–ø `item` –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è, `Report` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä, —Ç–æ–º—É `Chart` —Ç–∞–∫–æ–∂ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä:

```js {5,6-8,15}
function ReportList({ items }) {
  // ...
}

const Report = memo(function Report({ item }) {
  function handleClick() {
    sendReport(item);
  }

  return (
    <figure>
      <Chart onClick={handleClick} />
    </figure>
  );
});
```
