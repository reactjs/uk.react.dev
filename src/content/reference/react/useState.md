---
title: useState
---

<Intro>

`useState` ‚Äî —Ö—É–∫ React, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –¥–æ–¥–∞—Ç–∏ [–∑–º—ñ–Ω–Ω—É —Å—Ç–∞–Ω—É](/learn/state-a-components-memory) –¥–æ –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

```js
const [state, setState] = useState(initialState)
```

</Intro>

<InlineToc />

---

## –û–ø–∏—Å {/*reference*/}

### `useState(initialState)` {/*usestate*/}

–í–∏–∫–ª–∏–∫–∞—á—Ç–µ `useState` –Ω–∞ –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä—ñ–≤–Ω—ñ –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —â–æ–± –æ–≥–æ–ª–æ—Å–∏—Ç–∏ [–∑–º—ñ–Ω–Ω—É —Å—Ç–∞–Ω—É.](/learn/state-a-components-memory)

```js
import { useState } from 'react';

function MyComponent() {
  const [age, setAge] = useState(28);
  const [name, setName] = useState('–¢–µ–π–ª–æ—Ä');
  const [todos, setTodos] = useState(() => createTodos());
  // ...
```

–ó–∞–∑–≤–∏—á–∞–π –∑–º—ñ–Ω–Ω—ñ —Å—Ç–∞–Ω—É –Ω–∞–∑–∏–≤–∞—é—Ç—å —è–∫ –æ—Ç `[—â–æ—Å—å, set–©–æ—Å—å]`, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ [–¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü—ñ—é –º–∞—Å–∏–≤—É.](https://javascript.info/destructuring-assignment)

[–î–∏–≤—ñ—Ç—å—Å—è –±—ñ–ª—å—à–µ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ –Ω–∏–∂—á–µ.](#usage)

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ {/*parameters*/}

* `initialState`: –ó–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —è–∫ –ø–æ—á–∞—Ç–∫–æ–≤–µ –¥–ª—è —Å—Ç–∞–Ω—É. –¶–µ –º–æ–∂–µ –±—É—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –±—É–¥—å-—è–∫–æ–≥–æ —Ç–∏–ø—É, –∞–ª–µ —è–∫—â–æ —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—è ‚Äî –¥—ñ—é—Ç—å –æ—Å–æ–±–ª–∏–≤—ñ –ø—Ä–∞–≤–∏–ª–∞. –¶–µ–π –∞—Ä–≥—É–º–µ–Ω—Ç —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É.
  * –Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é —è–∫ `initialState`, –≤–æ–Ω–∞ —Å–ø—Ä–∞—Ü—é—î —è–∫ —è–∫ _—Ñ—É–Ω–∫—Ü—ñ—è-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä_. –í–æ–Ω–∞ –º–∞—î –±—É—Ç–∏ —á–∏—Å—Ç–æ—é, –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤, —ñ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –±—É–¥—å-—è–∫–µ –∑–Ω–∞—á–µ–Ω–Ω—è. React –≤–∏–∫–ª–∏—á–µ —ó—ó –ø—ñ–¥ —á–∞—Å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –π –∑–±–µ—Ä–µ–∂–µ —Ç–µ, —â–æ –≤–æ–Ω–∞ –ø–æ–≤–µ—Ä–Ω–µ, —è–∫ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω. [–î–∏–≤—ñ—Ç—å—Å—è –ø—Ä–∏–∫–ª–∞–¥ –Ω–∏–∂—á–µ.](#avoiding-recreating-the-initial-state)

#### –†–µ–∑—É–ª—å—Ç–∞—Ç {/*returns*/}

`useState` –ø–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Ä—ñ–≤–Ω–æ –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–Ω—è:

1. –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω. –ü—ñ–¥ —á–∞—Å –ø–µ—Ä—à–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É –≤—ñ–Ω –¥–æ—Ä—ñ–≤–Ω—é—î –ø–µ—Ä–µ–¥–∞–Ω–æ–º—É `initialState`.
2. [–§—É–Ω–∫—Ü—ñ—è `set`](#setstate), —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω –Ω–∞ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è —ñ –≤–∏–∫–ª–∏–∫–∞—î –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä.

#### –ó–∞—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è {/*caveats*/}

* `useState` ‚Äî —Ü–µ —Ö—É–∫, —Ç–æ–º—É –π–æ–≥–æ –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ **–ª–∏—à–µ –Ω–∞ –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä—ñ–≤–Ω—ñ –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** –∞–±–æ –≤–∞—à–æ–≥–æ –≤–ª–∞—Å–Ω–æ–≥–æ —Ö—É–∫–∞. –ù–µ –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –π–æ–≥–æ –≤ —Ü–∏–∫–ª–∞—Ö —á–∏ —É–º–æ–≤–∞—Ö. –ó–∞ –ø–æ—Ç—Ä–µ–±–∏ ‚Äî –ø–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å —Å—Ç–∞–Ω –≤ –Ω–æ–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.
* –£ —Ä–µ–∂–∏–º—ñ Strict Mode React –±—É–¥–µ **–≤–∏–∫–ª–∏–∫–∞—Ç–∏ –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä –¥–≤—ñ—á—ñ**, —â–æ–± [–¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∏—è–≤–∏—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤—ñ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏.](#my-initializer-or-updater-function-runs-twice) –¶–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ª–∏—à–µ –ø—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏ —ñ –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω. –Ø–∫—â–æ –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü—ñ—è-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä —á–∏—Å—Ç–∞ (—è–∫–æ—é –≤–æ–Ω–∞ —ñ –º–∞—î –±—É—Ç–∏), —Ü–µ –Ω–µ –ø–æ–∑–Ω–∞—á–∏—Ç—å—Å—è –Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω—Ü—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–Ω–æ–≥–æ –∑ –≤–∏–∫–ª–∏–∫—ñ–≤ –±—É–¥–µ –ø—Ä–æ—ñ–≥–Ω–æ—Ä–æ–≤–∞–Ω–æ.

---

### –§—É–Ω–∫—Ü—ñ—ó `set`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `setSomething(nextState)` {/*setstate*/}

–§—É–Ω–∫—Ü—ñ—è `set`, —è–∫—É –ø–æ–≤–µ—Ä—Ç–∞—î `useState`, –¥–æ–∑–≤–æ–ª—è—î –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω –Ω–∞ —ñ–Ω—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è —ñ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä. –í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç–∏ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–ø—Ä—è–º—É –∞–±–æ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –æ–±—á–∏—Å–ª—é—î –π–æ–≥–æ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É:

```js
const [name, setName] = useState('–ï–¥–≤–∞—Ä–¥');

function handleClick() {
  setName('–¢–µ–π–ª–æ—Ä');
  setAge(a => a + 1);
  // ...
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ {/*setstate-parameters*/}

* `nextState`: –ó–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —è–∫ –Ω–æ–≤–∏–π —Å—Ç–∞–Ω. –¶–µ –º–æ–∂–µ –±—É—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –±—É–¥—å-—è–∫–æ–≥–æ —Ç–∏–ø—É, –∞–ª–µ —è–∫—â–æ —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—è ‚Äî –¥—ñ—é—Ç—å –æ—Å–æ–±–ª–∏–≤—ñ –ø—Ä–∞–≤–∏–ª–∞.
  * –Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–¥–∞—Å—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é, React —Å–ø—Ä–∏–π–º–µ —ó—ó —è–∫ _—Ñ—É–Ω–∫—Ü—ñ—é-–æ–Ω–æ–≤–ª—é–≤–∞—á_. –í–æ–Ω–∞ –º–∞—î –±—É—Ç–∏ —á–∏—Å—Ç–æ—é, –ø—Ä–∏–π–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π (—â–µ –Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–∏–π) —Å—Ç–∞–Ω —è–∫ —î–¥–∏–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç, —ñ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ç–∞–Ω—É. React –¥–æ–¥–∞—Å—Ç—å –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é –¥–æ —á–µ—Ä–≥–∏ –æ–Ω–æ–≤–ª–µ–Ω—å —ñ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –ü—ñ–¥ —á–∞—Å –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É React —Ä–æ–∑—Ä–∞—Ö—É—î –Ω–æ–≤–∏–π —Å—Ç–∞–Ω, –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—á–∏ –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –∑ —á–µ—Ä–≥–∏ –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É. [–î–∏–≤—ñ—Ç—å—Å—è –ø—Ä–∏–∫–ª–∞–¥ –Ω–∏–∂—á–µ.](#updating-state-based-on-the-previous-state)

#### –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è {/*setstate-returns*/}

–§—É–Ω–∫—Ü—ñ—ó `set` –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è

#### –ó–∞—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è {/*setstate-caveats*/}

* –§—É–Ω–∫—Ü—ñ—è `set` **–æ–Ω–æ–≤–ª—é—î –∑–º—ñ–Ω–Ω—É —Å—Ç–∞–Ω—É –ª–∏—à–µ –¥–ª—è *–Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ* —Ä–µ–Ω–¥–µ—Ä—É**. –Ø–∫—â–æ –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ–Ω–Ω–æ—ó —Å—Ç–∞–Ω—É –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É `set`, [–≤–∏ –≤—Å–µ —â–µ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –ø–æ–ø–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è](#ive-updated-the-state-but-logging-gives-me-the-old-value), —è–∫–µ –±—É–ª–æ –∞–∫—Ç—É–∞–ª—å–Ω–∏–º –¥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.

* –Ø–∫—â–æ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ, —ñ–¥–µ–Ω—Ç–∏—á–Ω–µ –ø–æ—Ç–æ—á–Ω–æ–º—É `state` (–∑–≥—ñ–¥–Ω–æ –∑ [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)), React **–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ç–∞ –π–æ–≥–æ –Ω–∞—â–∞–¥–∫—ñ–≤.** –¶–µ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è. –•–æ—á–∞ –≤ –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö React —É—Å–µ –∂ –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ —Ä–µ–Ω–¥–µ—Ä –Ω–∞—â–∞–¥–∫—ñ–≤, —Ü–µ –Ω–µ –º–∞—î –≤–ø–ª–∏–Ω—É—Ç–∏ –Ω–∞ —Ä–æ–±–æ—Ç—É –≤–∞—à–æ–≥–æ –∫–æ–¥—É.

* React [–æ–±—Ä–æ–±–ª—è—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –ø–∞–∫–µ—Ç–Ω–æ.](/learn/queueing-a-series-of-state-updates) –í—ñ–Ω –æ–Ω–æ–≤–ª—é—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å **–ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π**, —è–∫—ñ –≤–∏–∫–ª–∏–∫–∞–ª–∏ —Å–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó `set`. –¶–µ –∑–∞–ø–æ–±—ñ–≥–∞—î –∫—ñ–ª—å–∫–æ–º –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º –ø—ñ–¥ —á–∞—Å –æ–¥–Ω—ñ—î—ó –ø–æ–¥—ñ—ó. –£ —Ä—ñ–¥–∫—ñ—Å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö, –∫–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∏–º—É—Å–æ–≤–æ –æ–Ω–æ–≤–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–Ω—ñ—à–µ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ DOM), –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è [`flushSync`.](/reference/react-dom/flushSync)

* –§—É–Ω–∫—Ü—ñ—è `set` –º–∞—î —Å—Ç–∞–±—ñ–ª—å–Ω—É —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å, —Ç–æ–∂ —ó—ó —á–∞—Å—Ç–æ –Ω–µ –≤–∫–ª—é—á–∞—é—Ç—å –¥–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —É Effect. –ê–ª–µ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –¥–æ–¥–∞—Ç–∏ ‚Äî —Ü–µ –Ω–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É Effect. –Ø–∫—â–æ –ª—ñ–Ω—Ç–µ—Ä –¥–æ–∑–≤–æ–ª—è—î –Ω–µ –≤–∫–∞–∑—É–≤–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –±–µ–∑ –ø–æ–º–∏–ª–æ–∫ ‚Äî —Ç–∞–∫ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏. [–î—ñ–∑–Ω–∞–π—Ç–µ—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —É Effect.](/learn/removing-effect-dependencies#move-dynamic-objects-and-functions-inside-your-effect)

* –í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó `set` *–ø—ñ–¥ —á–∞—Å —Ä–µ–Ω–¥–µ—Ä—É* –¥–æ–∑–≤–æ–ª–µ–Ω–æ –ª–∏—à–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —â–æ –Ω–∞—Ä–∞–∑—ñ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è. React –≤—ñ–¥–∫–∏–Ω–µ –π–æ–≥–æ –ø–æ—Ç–æ—á–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ñ –Ω–µ–≥–∞–π–Ω–æ —Å–ø—Ä–æ–±—É—î –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑ –Ω–æ–≤–∏–º —Å—Ç–∞–Ω–æ–º. –¢–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ä—ñ–¥–∫–æ, –∞–ª–µ –π–æ–≥–æ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏, —â–æ–± **–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ä–µ–Ω–¥–µ—Ä—ñ–≤**. [–î–∏–≤—ñ—Ç—å—Å—è –ø—Ä–∏–∫–ª–∞–¥ –Ω–∏–∂—á–µ.](#storing-information-from-previous-renders)

* –£ —Ä–µ–∂–∏–º—ñ Strict Mode React **–¥–≤—ñ—á—ñ –≤–∏–∫–ª–∏–∫–∞—î –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é-–æ–Ω–æ–≤–ª—é–≤–∞—á**, —â–æ–± [–¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∏—è–≤–∏—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤—ñ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏.](#my-initializer-or-updater-function-runs-twice) –¶–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ª–∏—à–µ –ø—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏ —ñ **–Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω**. –Ø–∫—â–æ –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á **—á–∏—Å—Ç–∞ (—è–∫ —ñ –º–∞—î –±—É—Ç–∏)**, —Ü–µ **–Ω–µ –≤–ø–ª–∏–Ω–µ –Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–Ω–æ–≥–æ –∑ –≤–∏–∫–ª–∏–∫—ñ–≤ –±—É–¥–µ **–ø—Ä–æ—ñ–≥–Ω–æ—Ä–æ–≤–∞–Ω–æ**.

---

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è {/*usage*/}

### –î–æ–¥–∞–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –¥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ {/*adding-state-to-a-component*/}

–í–∏–∫–ª–∏–∫–∞–π—Ç–µ `useState` –Ω–∞ –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä—ñ–≤–Ω—ñ –≤–∞—à–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —â–æ–± –æ–≥–æ–ª–æ—Å–∏—Ç–∏ –æ–¥–Ω—É –∞–±–æ –∫—ñ–ª—å–∫–∞ [–∑–º—ñ–Ω–Ω–∏—Ö —Å—Ç–∞–Ω—É.](/learn/state-a-components-memory)

```js [[1, 4, "age"], [2, 4, "setAge"], [3, 4, "42"], [1, 5, "name"], [2, 5, "setName"], [3, 5, "'–¢–µ–π–ª–æ—Ä'"]]
import { useState } from 'react';

function MyComponent() {
  const [age, setAge] = useState(42);
  const [name, setName] = useState('–¢–µ–π–ª–æ—Ä');
  // ...
```

–ó–∞–∑–≤–∏—á–∞–π –∑–º—ñ–Ω–Ω—ñ —Å—Ç–∞–Ω—É –Ω–∞–∑–∏–≤–∞—é—Ç—å —É —Ñ–æ—Ä–º–∞—Ç—ñ `[—â–æ—Å—å, set–©–æ—Å—å]`, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ [–¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü—ñ—é –º–∞—Å–∏–≤—É.](https://javascript.info/destructuring-assignment)

`useState` –ø–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Ä—ñ–≤–Ω–æ –¥–≤–∞ –µ–ª–µ–º–µ–Ω—Ç–∏:

1. <CodeStep step={1}>–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω</CodeStep> —Ü—ñ—î—ó –∑–º—ñ–Ω–Ω–æ—ó —Å—Ç–∞–Ω—É, —è–∫–∏–π —Å–ø–æ—á–∞—Ç–∫—É –¥–æ—Ä—ñ–≤–Ω—é—î <CodeStep step={3}>–ø–æ—á–∞—Ç–∫–æ–≤–æ–º—É –∑–Ω–∞—á–µ–Ω–Ω—é</CodeStep>, –ø–µ—Ä–µ–¥–∞–Ω–æ–º—É –≤–∞–º–∏.
2. <CodeStep step={2}>–§—É–Ω–∫—Ü—ñ—é `set`</CodeStep>, —è–∫–∞ –¥–∞—î –∑–º–æ–≥—É –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ü–µ–π —Å—Ç–∞–Ω —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –≤–∑–∞—î–º–æ–¥—ñ—é.

–©–æ–± –æ–Ω–æ–≤–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –≤–∏–∫–ª–∏—á—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é `set` –∑ –Ω–æ–≤–∏–º —Å—Ç–∞–Ω–æ–º:

```js [[2, 2, "setName"]]
function handleClick() {
  setName('–†–æ–±—ñ–Ω');
}
```

React –∑–±–µ—Ä–µ–∂–µ –Ω–æ–≤–∏–π —Å—Ç–∞–Ω, –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ñ–¥—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —ñ–∑ —Ü–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ —Ç–∞ –æ–Ω–æ–≤–∏—Ç—å —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

<Pitfall>

–í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó `set` [**–Ω–µ –∑–º—ñ–Ω—é—î** –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —É –∫–æ–¥—ñ, —â–æ –≤–∂–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è](#ive-updated-the-state-but-logging-gives-me-the-old-value):

```js {3}
function handleClick() {
  setName('–†–æ–±—ñ–Ω');
  console.log(name); // –í—Å–µ —â–µ "–¢–µ–π–ª–æ—Ä"!
}
```

–í—ñ–Ω –≤–ø–ª–∏–≤–∞—î –ª–∏—à–µ –Ω–∞ —Ç–µ, —â–æ `useState` –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏–º–µ –ø–æ—á–∏–Ω–∞—é—á–∏ –∑ *–Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ* —Ä–µ–Ω–¥–µ—Ä—É.

</Pitfall>

<Recipes titleText="–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è useState" titleId="examples-basic">

#### –õ—ñ—á–∏–ª—å–Ω–∏–∫ (—á–∏—Å–ª–æ) {/*counter-number*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –∑–º—ñ–Ω–Ω–∞ —Å—Ç–∞–Ω—É `count` –∑–±–µ—Ä—ñ–≥–∞—î —á–∏—Å–ª–æ. –ù–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ –∑–±—ñ–ª—å—à—É—î –π–æ–≥–æ –Ω–∞ –æ–¥–∏–Ω–∏—Ü—é.

<Sandpack>

```js
import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  function handleClick() {
    setCount(count + 1);
  }

  return (
    <button onClick={handleClick}>
      –í–∏ –Ω–∞—Ç–∏—Å–Ω—É–ª–∏ –Ω–∞ –º–µ–Ω–µ {count} —Ä–∞–∑(—ñ–≤)
    </button>
  );
}
```

</Sandpack>

<Solution />

#### –¢–µ–∫—Å—Ç–æ–≤–µ –ø–æ–ª–µ (—Ä—è–¥–æ–∫) {/*text-field-string*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –∑–º—ñ–Ω–Ω–∞ —Å—Ç–∞–Ω—É `text` –∑–±–µ—Ä—ñ–≥–∞—î —Ä—è–¥–æ–∫. –ö–æ–ª–∏ –≤–∏ —â–æ—Å—å –≤–≤–æ–¥–∏—Ç–µ, `handleChange` –∑—á–∏—Ç—É—î –æ—Å—Ç–∞–Ω–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è –∑ DOM-–µ–ª–µ–º–µ–Ω—Ç–∞ `<input>` —É –±—Ä–∞—É–∑–µ—Ä—ñ —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î `setText`, —â–æ–± –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω. –¶–µ –¥–∞—î –∑–º–æ–≥—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è `text` –ø–æ—Ä—è–¥.

<Sandpack>

```js
import { useState } from 'react';

export default function MyInput() {
  const [text, setText] = useState('–ü—Ä–∏–≤—ñ—Ç!');

  function handleChange(e) {
    setText(e.target.value);
  }

  return (
    <>
      <input value={text} onChange={handleChange} />
      <p>–í–∏ –≤–≤–µ–ª–∏: {text}</p>
      <button onClick={() => setText('–ü—Ä–∏–≤—ñ—Ç!')}>
        –°–∫–∏–Ω—É—Ç–∏
      </button>
    </>
  );
}
```

</Sandpack>

<Solution />

#### –ü—Ä–∞–ø–æ—Ä–µ—Ü—å (–±—É–ª–µ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è) {/*checkbox-boolean*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –∑–º—ñ–Ω–Ω–∞ —Å—Ç–∞–Ω—É `liked` –∑–±–µ—Ä—ñ–≥–∞—î –±—É–ª–µ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è. –ö–æ–ª–∏ –≤–∏ –Ω–∞—Ç–∏—Å–∫–∞—î—Ç–µ –Ω–∞ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å, `setLiked` –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞–Ω `liked` –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —Ç–æ–≥–æ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å —É –±—Ä–∞—É–∑–µ—Ä—ñ. –ó–º—ñ–Ω–Ω–∞ `liked` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –ø–æ—Ä—É—á —ñ–∑ –ø—Ä–∞–ø–æ—Ä—Ü–µ–º.

<Sandpack>

```js
import { useState } from 'react';

export default function MyCheckbox() {
  const [liked, setLiked] = useState(true);

  function handleChange(e) {
    setLiked(e.target.checked);
  }

  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={liked}
          onChange={handleChange}
        />
        –ú–µ–Ω—ñ —Å–ø–æ–¥–æ–±–∞–ª–æ—Å—è
      </label>
      <p>–í–∞–º —Ü–µ {liked ? '—Å–ø–æ–¥–æ–±–∞–ª–æ—Å—è' : '–Ω–µ —Å–ø–æ–¥–æ–±–∞–ª–æ—Å—è'}.</p>
    </>
  );
}
```

</Sandpack>

<Solution />

#### –§–æ—Ä–º–∞ (–¥–≤—ñ –∑–º—ñ–Ω–Ω—ñ) {/*form-two-variables*/}

–£ —Ç–æ–º—É —Å–∞–º–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ –º–æ–∂–Ω–∞ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ –±—ñ–ª—å—à–µ –Ω—ñ–∂ –æ–¥–Ω—É –∑–º—ñ–Ω–Ω—É —Å—Ç–∞–Ω—É. –ö–æ–∂–Ω–∞ –∑–º—ñ–Ω–Ω–∞ —Å—Ç–∞–Ω—É —î –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω–æ—é.

<Sandpack>

```js
import { useState } from 'react';

export default function Form() {
  const [name, setName] = useState('–¢–µ–π–ª–æ—Ä');
  const [age, setAge] = useState(42);

  return (
    <>
      <input
        value={name}
        onChange={e => setName(e.target.value)}
      />
      <button onClick={() => setAge(age + 1)}>
        –ó–±—ñ–ª—å—à–∏—Ç–∏ –≤—ñ–∫
      </button>
      <p>–ü—Ä–∏–≤—ñ—Ç, {name}. –¢–æ–±—ñ {age}.</p>
    </>
  );
}
```

```css
button { display: block; margin-top: 10px; }
```

</Sandpack>

<Solution />

</Recipes>

---

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ {/*updating-state-based-on-the-previous-state*/}

–ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, –∑–Ω–∞—á–µ–Ω–Ω—è `age` –¥–æ—Ä—ñ–≤–Ω—é—î `42`. –¶–µ–π –æ–±—Ä–æ–±–Ω–∏–∫ –≤–∏–∫–ª–∏–∫–∞—î `setAge(age + 1)` —Ç—Ä–∏—á—ñ:

```js
function handleClick() {
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
}
```

–û–¥–Ω–∞–∫ –ø—ñ—Å–ª—è –æ–¥–Ω–æ–≥–æ –∫–ª—ñ–∫–∞ `age` –±—É–¥–µ `43`, –∞ –Ω–µ `45`! –¶–µ —Ç–æ–º—É, —â–æ –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó `set` [–Ω–µ –æ–Ω–æ–≤–ª—é—î](/learn/state-as-a-snapshot) –∑–º—ñ–Ω–Ω—É `age` —É –∫–æ–¥—ñ, —â–æ –≤–∂–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è. –¢–æ–∂ –∫–æ–∂–µ–Ω –≤–∏–∫–ª–∏–∫ `setAge(age + 1)` —Å—Ç–∞—î `setAge(43)`.

–©–æ–± –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü—é –ø—Ä–æ–±–ª–µ–º—É, **–º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –¥–æ `setAge` *—Ñ—É–Ω–∫—Ü—ñ—é-–æ–Ω–æ–≤–ª—é–≤–∞—á*** –∑–∞–º—ñ—Å—Ç—å –Ω–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è:

```js [[1, 2, "a", 0], [2, 2, "a + 1"], [1, 3, "a", 0], [2, 3, "a + 1"], [1, 4, "a", 0], [2, 4, "a + 1"]]
function handleClick() {
  setAge(a => a + 1); // setAge(42 => 43)
  setAge(a => a + 1); // setAge(43 => 44)
  setAge(a => a + 1); // setAge(44 => 45)
}
```

–¢—É—Ç `a => a + 1` ‚Äî —Ü–µ –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á. –í–æ–Ω–∞ –ø—Ä–∏–π–º–∞—î <CodeStep step={1}>–ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è</CodeStep> —Å—Ç–∞–Ω—É —Ç–∞ –æ–±—á–∏—Å–ª—é—î –∑ –Ω—å–æ–≥–æ <CodeStep step={2}>–Ω–∞—Å—Ç—É–ø–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è</CodeStep>.

React —Å—Ç–∞–≤–∏—Ç—å —É—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó-–æ–Ω–æ–≤–ª—é–≤–∞—á—ñ —É [—á–µ—Ä–≥—É.](/learn/queueing-a-series-of-state-updates) –ü—ñ–¥ —á–∞—Å –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É –≤—ñ–Ω –≤–∏–∫–ª–∏—á–µ —ó—Ö —É —Ç–æ–º—É –∂ –ø–æ—Ä—è–¥–∫—É:

1. `a => a + 1` –æ—Ç—Ä–∏–º–∞—î `42` —è–∫ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ `43`.
2. `a => a + 1` –æ—Ç—Ä–∏–º–∞—î `43` —è–∫ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ `44`.
3. `a => a + 1` –æ—Ç—Ä–∏–º–∞—î `44` —è–∫ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ `45`.

–Ü–Ω—à–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å —É —á–µ—Ä–∑—ñ –Ω–µ–º–∞—î, —Ç–æ–∂ React –∑—Ä–µ—à—Ç–æ—é –∑–±–µ—Ä–µ–∂–µ `45` —è–∫ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ç–∞–Ω—É.

–ó–∞–∑–≤–∏—á–∞–π –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü—ñ—ó-–æ–Ω–æ–≤–ª—é–≤–∞—á–∞ –Ω–∞–∑–∏–≤–∞—é—Ç—å –ø–µ—Ä—à–æ—é –ª—ñ—Ç–µ—Ä–æ—é –Ω–∞–∑–≤–∏ –∑–º—ñ–Ω–Ω–æ—ó —Å—Ç–∞–Ω—É ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `a` –¥–ª—è `age`. –û–¥–Ω–∞–∫ –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –Ω–∞–∑–≤–∏ —Ç–∏–ø—É `prevAge` –∞–±–æ –±—É–¥—å-—è–∫—ñ —ñ–Ω—à—ñ, —è–∫—ñ –≤–∞–º –∑—Ä–æ–∑—É–º—ñ–ª—ñ—à—ñ.

–£ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏ React –º–æ–∂–µ [–≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó-–æ–Ω–æ–≤–ª—é–≤–∞—á—ñ –¥–≤—ñ—á—ñ](#my-initializer-or-updater-function-runs-twice), —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –≤–æ–Ω–∏ [—á–∏—Å—Ç—ñ.](/learn/keeping-components-pure)

<DeepDive>

#### –ß–∏ –∑–∞–≤–∂–¥–∏ –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é-–æ–Ω–æ–≤–ª—é–≤–∞—á? {/*is-using-an-updater-always-preferred*/}

–í–∏ –º–æ–≥–ª–∏ —á—É—Ç–∏ –ø–æ—Ä–∞–¥—É –∑–∞–≤–∂–¥–∏ –ø–∏—Å–∞—Ç–∏ –∫–æ–¥ —É —Å—Ç–∏–ª—ñ `setAge(a => a + 1)`, —è–∫—â–æ –Ω–æ–≤–∏–π —Å—Ç–∞–Ω –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ. –¶–µ –Ω–µ –∑–∞–≤–¥–∞—î —à–∫–æ–¥–∏, –∞–ª–µ –π –Ω–µ –∑–∞–≤–∂–¥–∏ —î –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º.

–£ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ –Ω–µ–º–∞—î —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ —Ü–∏–º–∏ –¥–≤–æ–º–∞ –ø—ñ–¥—Ö–æ–¥–∞–º–∏. React –∑–∞–≤–∂–¥–∏ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –¥–ª—è —Å–≤—ñ–¥–æ–º–∏—Ö –¥—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —è–∫-–æ—Ç –∫–ª—ñ–∫–∏, –∑–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–æ—ó `age` –±—É–¥–µ –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∫–ª—ñ–∫—É. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –æ–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É –Ω–µ –ø–æ–±–∞—á–∏—Ç—å "–∑–∞—Å—Ç–∞—Ä—ñ–ª–µ" –∑–Ω–∞—á–µ–Ω–Ω—è `age` –Ω–∞ –ø–æ—á–∞—Ç–∫—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

–û–¥–Ω–∞–∫ —è–∫—â–æ –≤–∏ –≤–∏–∫–æ–Ω—É—î—Ç–µ –∫—ñ–ª—å–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω—å —É –º–µ–∂–∞—Ö –æ–¥–Ω—ñ—î—ó –ø–æ–¥—ñ—ó, —Ñ—É–Ω–∫—Ü—ñ—ó-–æ–Ω–æ–≤–ª—é–≤–∞—á—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∫–æ—Ä–∏—Å–Ω–∏–º–∏. –í–æ–Ω–∏ —Ç–∞–∫–æ–∂ –∑—Ä—É—á–Ω—ñ, –∫–æ–ª–∏ –¥–æ—Å—Ç—É–ø –¥–æ –∑–º—ñ–Ω–Ω–æ—ó —Å—Ç–∞–Ω—É —É—Å–∫–ª–∞–¥–Ω–µ–Ω–∏–π (–∑ —Ü–∏–º –º–æ–∂–Ω–∞ –∑—ñ—Ç–∫–Ω—É—Ç–∏—Å—è –ø—ñ–¥ —á–∞—Å –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É).

–Ø–∫—â–æ –¥–ª—è –≤–∞—Å –≤–∞–∂–ª–∏–≤–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –Ω–∞–≤—ñ—Ç—å –∑–∞ —Ü—ñ–Ω–æ—é —Ç—Ä–æ—Ö–∏ –±–∞–≥–∞—Ç–æ—Å–ª—ñ–≤–Ω—ñ—à–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É, —Ü—ñ–ª–∫–æ–º –ª–æ–≥—ñ—á–Ω–æ –∑–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é-–æ–Ω–æ–≤–ª—é–≤–∞—á, –∫–æ–ª–∏ –Ω–æ–≤–∏–π —Å—Ç–∞–Ω –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ. –Ø–∫—â–æ –∂ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É *—ñ–Ω—à–æ—ó* –∑–º—ñ–Ω–Ω–æ—ó, –º–æ–∂–ª–∏–≤–æ, –≤–∞—Ä—Ç–æ –æ–±'—î–¥–Ω–∞—Ç–∏ —ó—Ö –≤ –æ–¥–∏–Ω –æ–±'—î–∫—Ç —ñ [–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ä–µ–¥—é—Å–µ—Ä.](/learn/extracting-state-logic-into-a-reducer)

</DeepDive>

<Recipes titleText="–†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è–º —Ñ—É–Ω–∫—Ü—ñ—ó-–æ–Ω–æ–≤–ª—é–≤–∞—á–∞ —Ç–∞ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è" titleId="examples-updater">

#### –ü–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó-–æ–Ω–æ–≤–ª—é–≤–∞—á–∞ {/*passing-the-updater-function*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á, —Ç–æ–∂ –∫–Ω–æ–ø–∫–∞ "+3" –ø—Ä–∞—Ü—é—î —è–∫ –æ—á—ñ–∫—É—î—Ç—å—Å—è.

<Sandpack>

```js
import { useState } from 'react';

export default function Counter() {
  const [age, setAge] = useState(42);

  function increment() {
    setAge(a => a + 1);
  }

  return (
    <>
      <h1>–í–∞—à –≤—ñ–∫: {age}</h1>
      <button onClick={() => {
        increment();
        increment();
        increment();
      }}>+3</button>
      <button onClick={() => {
        increment();
      }}>+1</button>
    </>
  );
}
```

```css
button { display: block; margin: 10px; font-size: 20px; }
h1 { display: block; margin: 10px; }
```

</Sandpack>

<Solution />

#### –ü–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–ø—Ä—è–º—É {/*passing-the-next-state-directly*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ **–Ω–µ** –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á, —Ç–æ–º—É –∫–Ω–æ–ø–∫–∞ "+3" **–Ω–µ –ø—Ä–∞—Ü—é—î —è–∫ –æ—á—ñ–∫—É—î—Ç—å—Å—è**.

<Sandpack>

```js
import { useState } from 'react';

export default function Counter() {
  const [age, setAge] = useState(42);

  function increment() {
    setAge(age + 1);
  }

  return (
    <>
      <h1>–í–∞—à –≤—ñ–∫: {age}</h1>
      <button onClick={() => {
        increment();
        increment();
        increment();
      }}>+3</button>
      <button onClick={() => {
        increment();
      }}>+1</button>
    </>
  );
}
```

```css
button { display: block; margin: 10px; font-size: 20px; }
h1 { display: block; margin: 10px; }
```

</Sandpack>

<Solution />

</Recipes>

---

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É, —â–æ –º—ñ—Å—Ç–∏—Ç—å –æ–±‚Äô—î–∫—Ç–∏ —Ç–∞ –º–∞—Å–∏–≤–∏ {/*updating-objects-and-arrays-in-state*/}

–£ —Å—Ç–∞–Ω –º–æ–∂–Ω–∞ –ø–æ–º—ñ—â–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ —Ç–∞ –º–∞—Å–∏–≤–∏. –£ React —Å—Ç–∞–Ω –¥–æ—Å—Ç—É–ø–Ω–∏–π –ª–∏—à–µ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è, —Ç–æ–º—É **–π–æ–≥–æ —Å–ª—ñ–¥ *–∑–∞–º—ñ–Ω—é–≤–∞—Ç–∏*, –∞ –Ω–µ *–∑–º—ñ–Ω—é–≤–∞—Ç–∏* –Ω–∞—è–≤–Ω—ñ –æ–±'—î–∫—Ç–∏**. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —É –≤–∞—Å —î –æ–±'—î–∫—Ç `form` —É —Å—Ç–∞–Ω—ñ, –Ω–µ –∑–º—ñ–Ω—é–π—Ç–µ –π–æ–≥–æ –æ—Å—å —Ç–∞–∫:

```js
// üö© –ù–µ –∑–º—ñ–Ω—é–π—Ç–µ –æ–±'—î–∫—Ç —É —Å—Ç–∞–Ω—ñ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ:
form.firstName = '–¢–µ–π–ª–æ—Ä';
```

–ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –∑–∞–º—ñ–Ω—ñ—Ç—å –≤–µ—Å—å –æ–±'—î–∫—Ç, —Å—Ç–≤–æ—Ä–∏–≤—à–∏ –Ω–æ–≤–∏–π:

```js
// ‚úÖ –ó–∞–º—ñ–Ω—ñ—Ç—å —Å—Ç–∞–Ω –Ω–æ–≤–∏–º –æ–±'—î–∫—Ç–æ–º
setForm({
  ...form,
  firstName: '–¢–µ–π–ª–æ—Ä'
});
```

–ü—Ä–æ —Ü–µ –¥–æ–∫–ª–∞–¥–Ω—ñ—à–µ —É —Ä–æ–∑–¥—ñ–ª–∞—Ö [–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ —É —Å—Ç–∞–Ω—ñ](/learn/updating-objects-in-state) —Ç–∞ [–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—Å–∏–≤—ñ–≤ —É —Å—Ç–∞–Ω—ñ.](/learn/updating-arrays-in-state).

<Recipes titleText="–ü—Ä–∏–∫–ª–∞–¥–∏ –æ–±'—î–∫—Ç—ñ–≤ —ñ –º–∞—Å–∏–≤—ñ–≤ —É —Å—Ç–∞–Ω—ñ" titleId="examples-objects">

#### –§–æ—Ä–º–∞ (–æ–±'—î–∫—Ç) {/*form-object*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –∑–º—ñ–Ω–Ω–∞ —Å—Ç–∞–Ω—É `form` –∑–±–µ—Ä—ñ–≥–∞—î –æ–±'—î–∫—Ç. –ö–æ–∂–Ω–µ –ø–æ–ª–µ –≤–≤–æ–¥—É –º–∞—î –æ–±—Ä–æ–±–Ω–∏–∫ –∑–º—ñ–Ω–∏, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î `setForm` —ñ–∑ –Ω–æ–≤–∏–º —Å—Ç–∞–Ω–æ–º —É—Å—ñ—î—ó —Ñ–æ—Ä–º–∏. –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ä–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è `{ ...form }` –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –æ–±'—î–∫—Ç —Å—Ç–∞–Ω—É –±—É–¥–µ –∑–∞–º—ñ–Ω–µ–Ω–æ, –∞ –Ω–µ –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞–ø—Ä—è–º—É.

<Sandpack>

```js
import { useState } from 'react';

export default function Form() {
  const [form, setForm] = useState({
    firstName: '–ë–∞—Ä–±–∞—Ä–∞',
    lastName: '–ì–µ–ø–≤–æ—Ä—Ç',
    email: 'bhepworth@sculpture.com',
  });

  return (
    <>
      <label>
        –Ü–º‚Äô—è:
        <input
          value={form.firstName}
          onChange={e => {
            setForm({
              ...form,
              firstName: e.target.value
            });
          }}
        />
      </label>
      <label>
        –ü—Ä—ñ–∑–≤–∏—â–µ:
        <input
          value={form.lastName}
          onChange={e => {
            setForm({
              ...form,
              lastName: e.target.value
            });
          }}
        />
      </label>
      <label>
        Email:
        <input
          value={form.email}
          onChange={e => {
            setForm({
              ...form,
              email: e.target.value
            });
          }}
        />
      </label>
      <p>
        {form.firstName}{' '}
        {form.lastName}{' '}
        ({form.email})
      </p>
    </>
  );
}
```

```css
label { display: block; }
input { margin-left: 5px; }
```

</Sandpack>

<Solution />

#### –§–æ—Ä–º–∞ (–≤–∫–ª–∞–¥–µ–Ω–∏–π –æ–±'—î–∫—Ç) {/*form-nested-object*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ —Å—Ç–∞–Ω —î –±—ñ–ª—å—à –≤–∫–ª–∞–¥–µ–Ω–∏–º. –ö–æ–ª–∏ –≤–∏ –æ–Ω–æ–≤–ª—é—î—Ç–µ –≤–∫–ª–∞–¥–µ–Ω–∏–π —Å—Ç–∞–Ω, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ø—ñ—é —è–∫ –æ–±'—î–∫—Ç–∞, —è–∫–∏–π –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è, —Ç–∞–∫ —ñ –≤—Å—ñ—Ö –æ–±'—î–∫—Ç—ñ–≤, —è–∫—ñ –π–æ–≥–æ –º—ñ—Å—Ç—è—Ç—å, –Ω–∞ —à–ª—è—Ö—É –¥–æ–≥–æ—Ä–∏. –î–æ–∫–ª–∞–¥–Ω—ñ—à–µ —á–∏—Ç–∞–π—Ç–µ —É —Ä–æ–∑–¥—ñ–ª—ñ [–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞](/learn/updating-objects-in-state#updating-a-nested-object).

<Sandpack>

```js
import { useState } from 'react';

export default function Form() {
  const [person, setPerson] = useState({
    name: '–ù—ñ–∫—ñ –¥–µ –°–µ–Ω-–§–∞–ª—å',
    artwork: {
      title: '–°–∏–Ω—è –ù–∞–Ω–∞',
      city: '–ì–∞–º–±—É—Ä–≥',
      image: 'https://i.imgur.com/Sd1AgUOm.jpg',
    }
  });

  function handleNameChange(e) {
    setPerson({
      ...person,
      name: e.target.value
    });
  }

  function handleTitleChange(e) {
    setPerson({
      ...person,
      artwork: {
        ...person.artwork,
        title: e.target.value
      }
    });
  }

  function handleCityChange(e) {
    setPerson({
      ...person,
      artwork: {
        ...person.artwork,
        city: e.target.value
      }
    });
  }

  function handleImageChange(e) {
    setPerson({
      ...person,
      artwork: {
        ...person.artwork,
        image: e.target.value
      }
    });
  }

  return (
    <>
      <label>
        –Ü–º‚Äô—è:
        <input
          value={person.name}
          onChange={handleNameChange}
        />
      </label>
      <label>
        –ù–∞–∑–≤–∞:
        <input
          value={person.artwork.title}
          onChange={handleTitleChange}
        />
      </label>
      <label>
        –ú—ñ—Å—Ç–æ:
        <input
          value={person.artwork.city}
          onChange={handleCityChange}
        />
      </label>
      <label>
        –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è:
        <input
          value={person.artwork.image}
          onChange={handleImageChange}
        />
      </label>
      <p>
        <i>{person.artwork.title}</i>
        {' –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ '}
        {person.name}
        <br />
        (–∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —É {person.artwork.city})
      </p>
      <img 
        src={person.artwork.image} 
        alt={person.artwork.title}
      />
    </>
  );
}
```

```css
label { display: block; }
input { margin-left: 5px; margin-bottom: 5px; }
img { width: 200px; height: 200px; }
```

</Sandpack>

<Solution />

#### –°–ø–∏—Å–æ–∫ (–º–∞—Å–∏–≤) {/*list-array*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –∑–º—ñ–Ω–Ω–∞ —Å—Ç–∞–Ω—É `todos` –∑–±–µ—Ä—ñ–≥–∞—î –º–∞—Å–∏–≤. –ö–æ–∂–µ–Ω –æ–±—Ä–æ–±–Ω–∏–∫ –∫–Ω–æ–ø–∫–∏ –≤–∏–∫–ª–∏–∫–∞—î `setTodos` –∑ –Ω–∞—Å—Ç—É–ø–Ω–æ—é –≤–µ—Ä—Å—ñ—î—é —Ü—å–æ–≥–æ –º–∞—Å–∏–≤—É. –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ä–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è `[...todos]`, –∞ —Ç–∞–∫–æ–∂ –º–µ—Ç–æ–¥–∏ `todos.map()` —ñ `todos.filter()` –≥–∞—Ä–∞–Ω—Ç—É—é—Ç—å, —â–æ –º–∞—Å–∏–≤ –±—É–¥–µ –∑–∞–º—ñ–Ω–µ–Ω–æ, –∞ –Ω–µ –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞–ø—Ä—è–º—É.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import AddTodo from './AddTodo.js';
import TaskList from './TaskList.js';

let nextId = 3;
const initialTodos = [
  { id: 0, title: '–ö—É–ø–∏—Ç–∏ –º–æ–ª–æ–∫–æ', done: true },
  { id: 1, title: '–ó‚Äô—ó—Å—Ç–∏ —Ç–∞–∫–æ', done: false },
  { id: 2, title: '–ó–∞–≤–∞—Ä–∏—Ç–∏ —á–∞–π', done: false },
];

export default function TaskApp() {
  const [todos, setTodos] = useState(initialTodos);

  function handleAddTodo(title) {
    setTodos([
      ...todos,
      {
        id: nextId++,
        title: title,
        done: false
      }
    ]);
  }

  function handleChangeTodo(nextTodo) {
    setTodos(todos.map(t => {
      if (t.id === nextTodo.id) {
        return nextTodo;
      } else {
        return t;
      }
    }));
  }

  function handleDeleteTodo(todoId) {
    setTodos(
      todos.filter(t => t.id !== todoId)
    );
  }

  return (
    <>
      <AddTodo
        onAddTodo={handleAddTodo}
      />
      <TaskList
        todos={todos}
        onChangeTodo={handleChangeTodo}
        onDeleteTodo={handleDeleteTodo}
      />
    </>
  );
}
```

```js src/AddTodo.js
import { useState } from 'react';

export default function AddTodo({ onAddTodo }) {
  const [title, setTitle] = useState('');
  return (
    <>
      <input
        placeholder="–î–æ–¥–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è"
        value={title}
        onChange={e => setTitle(e.target.value)}
      />
      <button onClick={() => {
        setTitle('');
        onAddTodo(title);
      }}>–î–æ–¥–∞—Ç–∏</button>
    </>
  )
}
```

```js src/TaskList.js
import { useState } from 'react';

export default function TaskList({
  todos,
  onChangeTodo,
  onDeleteTodo
}) {
  return (
    <ul>
      {todos.map(todo => (
        <li key={todo.id}>
          <Task
            todo={todo}
            onChange={onChangeTodo}
            onDelete={onDeleteTodo}
          />
        </li>
      ))}
    </ul>
  );
}

function Task({ todo, onChange, onDelete }) {
  const [isEditing, setIsEditing] = useState(false);
  let todoContent;
  if (isEditing) {
    todoContent = (
      <>
        <input
          value={todo.title}
          onChange={e => {
            onChange({
              ...todo,
              title: e.target.value
            });
          }} />
        <button onClick={() => setIsEditing(false)}>
          –ó–±–µ—Ä–µ–≥—Ç–∏
        </button>
      </>
    );
  } else {
    todoContent = (
      <>
        {todo.title}
        <button onClick={() => setIsEditing(true)}>
          –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
        </button>
      </>
    );
  }
  return (
    <label>
      <input
        type="checkbox"
        checked={todo.done}
        onChange={e => {
          onChange({
            ...todo,
            done: e.target.checked
          });
        }}
      />
      {todoContent}
      <button onClick={() => onDelete(todo.id)}>
        –í–∏–¥–∞–ª–∏—Ç–∏
      </button>
    </label>
  );
}
```

```css
button { margin: 5px; }
li { list-style-type: none; }
ul, li { margin: 0; padding: 0; }
```

</Sandpack>

<Solution />

#### –õ–∞–∫–æ–Ω—ñ—á–Ω–∞ –ª–æ–≥—ñ–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ Immer {/*writing-concise-update-logic-with-immer*/}

–Ø–∫—â–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—Å–∏–≤—ñ–≤ —Ç–∞ –æ–±‚Äô—î–∫—Ç—ñ–≤ –±–µ–∑ –º—É—Ç–∞—Ü—ñ–π –∑–¥–∞—î—Ç—å—Å—è –∫–ª–æ–ø—ñ—Ç–∫–∏–º, —â–æ–± –∑–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–æ–≥–æ –∫–æ–¥—É, –º–æ–∂–Ω–∞ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–æ—é –Ω–∞ –∫—à—Ç–∞–ª—Ç [Immer](https://github.com/immerjs/use-immer). Immer –¥–æ–∑–≤–æ–ª—è—î –ø–∏—Å–∞—Ç–∏ –ª–∞–∫–æ–Ω—ñ—á–Ω–∏–π –∫–æ–¥, –Ω—ñ–±–∏ –≤–∏ –∑–º—ñ–Ω—é—î—Ç–µ –æ–±‚Äô—î–∫—Ç–∏ –Ω–∞–ø—Ä—è–º—É, –∞–ª–µ –∑–∞ –ª–∞—à—Ç—É–Ω–∫–∞–º–∏ –≤—ñ–Ω –≤–∏–∫–æ–Ω—É—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±–µ–∑ –º—É—Ç–∞—Ü—ñ–π:

<Sandpack>

```js
import { useState } from 'react';
import { useImmer } from 'use-immer';

let nextId = 3;
const initialList = [
  { id: 0, title: '–ë–∞–±–∞ –ì–∞–ª—è –≤ –ª—é–º—ñ–Ω–æ–ª—ñ', seen: false },
  { id: 1, title: '–í–∏—à–∏–≤–∞–Ω–∫–∞ –∑ —à—É–º–æ–º', seen: false },
  { id: 2, title: '–ö–∏–ª–∏–º –Ω–∞ —Å—Ç–µ–ª—ñ', seen: true },
];

export default function BucketList() {
  const [list, updateList] = useImmer(initialList);

  function handleToggle(artworkId, nextSeen) {
    updateList(draft => {
      const artwork = draft.find(a =>
        a.id === artworkId
      );
      artwork.seen = nextSeen;
    });
  }

  return (
    <>
      <h1>–ú–∏—Å—Ç–µ—Ü—å–∫–∏–π —Å–ø–∏—Å–æ–∫ –±–∞–∂–∞–Ω—å</h1> 
      <h2>–Ø —Ö–æ—á—É –ø–æ–±–∞—á–∏—Ç–∏:</h2>
      <ItemList
        artworks={list}
        onToggle={handleToggle} />
    </>
  );
}

function ItemList({ artworks, onToggle }) {
  return (
    <ul>
      {artworks.map(artwork => (
        <li key={artwork.id}>
          <label>
            <input
              type="checkbox"
              checked={artwork.seen}
              onChange={e => {
                onToggle(
                  artwork.id,
                  e.target.checked
                );
              }}
            />
            {artwork.title}
          </label>
        </li>
      ))}
    </ul>
  );
}
```

```json package.json
{
  "dependencies": {
    "immer": "1.7.3",
    "react": "latest",
    "react-dom": "latest",
    "react-scripts": "latest",
    "use-immer": "0.5.1"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test --env=jsdom",
    "eject": "react-scripts eject"
  }
}
```

</Sandpack>

<Solution />

</Recipes>

---

### –£–Ω–∏–∫–∞–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É {/*avoiding-recreating-the-initial-state*/}

React –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω –æ–¥–∏–Ω —Ä–∞–∑ —ñ —ñ–≥–Ω–æ—Ä—É—î –π–æ–≥–æ –ø—ñ–¥ —á–∞—Å –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä—ñ–≤.

```js
function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos());
  // ...
```

–•–æ—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç `createInitialTodos()` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ª–∏—à–µ –ø—ñ–¥ —á–∞—Å –ø–µ—Ä—à–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É, –≤–∏ –≤—Å–µ –æ–¥–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é –Ω–∞ –∫–æ–∂–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ. –¶–µ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, —è–∫—â–æ —Ñ—É–Ω–∫—Ü—ñ—è —Å—Ç–≤–æ—Ä—é—î –≤–µ–ª–∏–∫—ñ –º–∞—Å–∏–≤–∏ –∞–±–æ –≤–∏–∫–æ–Ω—É—î —Ä–µ—Å—É—Ä—Å–æ—î–º–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è.

–©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ —Ü—å–æ–≥–æ, —É `useState` **–ø–µ—Ä–µ–¥–∞–π—Ç–µ —ó—ó —è–∫ _—Ñ—É–Ω–∫—Ü—ñ—é-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä_**:

```js
function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos);
  // ...
```

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ `createInitialTodos`, —Ç–æ–±—Ç–æ *—Å–∞–º—É —Ñ—É–Ω–∫—Ü—ñ—é*, –∞ –Ω–µ `createInitialTodos()`, —â–æ —î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —ó—ó –≤–∏–∫–ª–∏–∫—É. –Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é –≤ `useState`, React –≤–∏–∫–ª–∏–∫–∞—î —ó—ó –ª–∏—à–µ –ø—ñ–¥ —á–∞—Å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.

–£ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏ React –º–æ–∂–µ [–¥–≤—ñ—á—ñ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –≤–∞—à—ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä–∏](#my-initializer-or-updater-function-runs-twice), —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –≤–æ–Ω–∏ [—á–∏—Å—Ç—ñ.](/learn/keeping-components-pure)

<Recipes titleText="–†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è–º —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä–∞ —ñ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è–º –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É –Ω–∞–ø—Ä—è–º—É" titleId="examples-initializer">

#### –ü–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä–∞ {/*passing-the-initializer-function*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä, —Ç–æ–º—É `createInitialTodos` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ –ø—ñ–¥ —á–∞—Å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó. –í–æ–Ω–∞ **–Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è** –ø—ñ–¥ —á–∞—Å –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä—ñ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–∏ –≤–∏ —â–æ—Å—å –≤–≤–æ–¥–∏—Ç–µ –≤ –ø–æ–ª–µ.

<Sandpack>

```js
import { useState } from 'react';

function createInitialTodos() {
  const initialTodos = [];
  for (let i = 0; i < 50; i++) {
    initialTodos.push({
      id: i,
      text: '–ï–ª–µ–º–µ–Ω—Ç ' + (i + 1)
    });
  }
  return initialTodos;
}

export default function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos);
  const [text, setText] = useState('');

  return (
    <>
      <input
        value={text}
        onChange={e => setText(e.target.value)}
      />
      <button onClick={() => {
        setText('');
        setTodos([{
          id: todos.length,
          text: text
        }, ...todos]);
      }}>–î–æ–¥–∞—Ç–∏</button>
      <ul>
        {todos.map(item => (
          <li key={item.id}>
            {item.text}
          </li>
        ))}
      </ul>
    </>
  );
}
```

</Sandpack>

<Solution />

#### –ü–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É –Ω–∞–ø—Ä—è–º—É {/*passing-the-initial-state-directly*/}

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ **–Ω–µ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è** —Ñ—É–Ω–∫—Ü—ñ—è-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä, —Ç–æ–º—É `createInitialTodos` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è **–Ω–∞ –∫–æ–∂–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ**, –∑–æ–∫—Ä–µ–º–∞ –π –ø—Ä–∏ –≤–≤–µ–¥–µ–Ω–Ω—ñ —Ç–µ–∫—Å—Ç—É –≤ —ñ–Ω–ø—É—Ç. –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è, –∞–ª–µ —Ü–µ –º–µ–Ω—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥.

<Sandpack>

```js
import { useState } from 'react';

function createInitialTodos() {
  const initialTodos = [];
  for (let i = 0; i < 50; i++) {
    initialTodos.push({
      id: i,
      text: '–ï–ª–µ–º–µ–Ω—Ç ' + (i + 1)
    });
  }
  return initialTodos;
}

export default function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos());
  const [text, setText] = useState('');

  return (
    <>
      <input
        value={text}
        onChange={e => setText(e.target.value)}
      />
      <button onClick={() => {
        setText('');
        setTodos([{
          id: todos.length,
          text: text
        }, ...todos]);
      }}>–î–æ–¥–∞—Ç–∏</button>
      <ul>
        {todos.map(item => (
          <li key={item.id}>
            {item.text}
          </li>
        ))}
      </ul>
    </>
  );
}
```

</Sandpack>

<Solution />

</Recipes>

---

### –°–∫–∏–¥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `key` {/*resetting-state-with-a-key*/}

–í–∏ —á–∞—Å—Ç–æ –∑—É—Å—Ç—Ä—ñ—á–∞—Ç–∏–º–µ—Ç–µ –∞—Ç—Ä–∏–±—É—Ç `key` –ø—Ä–∏ [—Ä–µ–Ω–¥–µ—Ä—ñ–Ω–≥—É —Å–ø–∏—Å–∫—ñ–≤.](/learn/rendering-lists) –ê–ª–µ –≤—ñ–Ω –º–∞—î —â–µ –æ–¥–Ω—É —Ü—ñ–∫–∞–≤—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å.

–í–∏ –º–æ–∂–µ—Ç–µ **—Å–∫–∏–Ω—É—Ç–∏ —Å—Ç–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –ø–µ—Ä–µ–¥–∞–≤—à–∏ –π–æ–º—É —ñ–Ω—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è `key`.** –£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –∫–Ω–æ–ø–∫–∞ Reset –∑–º—ñ–Ω—é—î –∑–º—ñ–Ω–Ω—É —Å—Ç–∞–Ω—É `version`, —è–∫—É –º–∏ –ø–µ—Ä–µ–¥–∞—î–º–æ —è–∫ `key` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É `Form`. –ö–æ–ª–∏ –∑–Ω–∞—á–µ–Ω–Ω—è `key` –∑–º—ñ–Ω—é—î—Ç—å—Å—è, React —Å—Ç–≤–æ—Ä—é—î –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Form` (—ñ –≤—Å—ñ—Ö –π–æ–≥–æ –Ω–∞—â–∞–¥–∫—ñ–≤) –∑–∞–Ω–æ–≤–æ, —Ç–æ–∂ –π–æ–≥–æ —Å—Ç–∞–Ω —Å–∫–∏–¥–∞—î—Ç—å—Å—è.

–î–æ–∫–ª–∞–¥–Ω—ñ—à–µ —á–∏—Ç–∞–π—Ç–µ –≤ —Ä–æ–∑–¥—ñ–ª—ñ [–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ —Å–∫–∏–¥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É](/learn/preserving-and-resetting-state).

<Sandpack>

```js src/App.js
import { useState } from 'react';

export default function App() {
  const [version, setVersion] = useState(0);

  function handleReset() {
    setVersion(version + 1);
  }

  return (
    <>
      <button onClick={handleReset}>–°–∫–∏–Ω—É—Ç–∏</button>
      <Form key={version} />
    </>
  );
}

function Form() {
  const [name, setName] = useState('–¢–µ–π–ª–æ—Ä');

  return (
    <>
      <input
        value={name}
        onChange={e => setName(e.target.value)}
      />
      <p>–ü—Ä–∏–≤—ñ—Ç, {name}.</p>
    </>
  );
}
```

```css
button { display: block; margin-bottom: 20px; }
```

</Sandpack>

---

### –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ä–µ–Ω–¥–µ—Ä—ñ–≤ {/*storing-information-from-previous-renders*/}

–ó–∞–∑–≤–∏—á–∞–π –≤–∏ –æ–Ω–æ–≤–ª—é—î—Ç–µ —Å—Ç–∞–Ω —É –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö –ø–æ–¥—ñ–π. –ê–ª–µ —ñ–Ω–æ–¥—ñ –≤–∏–Ω–∏–∫–∞—î –ø–æ—Ç—Ä–µ–±–∞ –∑–º—ñ–Ω–∏—Ç–∏ —Å—Ç–∞–Ω —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ —Å–∞–º —Ä–µ–Ω–¥–µ—Ä ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–º—ñ–Ω–∏—Ç–∏ —Å—Ç–∞–Ω, –∫–æ–ª–∏ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—Ä–æ–ø—Å.

–£ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ —Ü–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ:

* **–Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–∂–Ω–∞ –æ–±—á–∏—Å–ª–∏—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ—Ç–æ—á–Ω–∏—Ö –ø—Ä–æ–ø—Å—ñ–≤ –∞–±–æ —Å—Ç–∞–Ω—É ‚Äî [–≤–∑–∞–≥–∞–ª—ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ –π–æ–≥–æ –≤ —Å—Ç–∞–Ω—ñ.](/learn/choosing-the-state-structure#avoid-redundant-state)** –Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–π–º–∞—î—Ç–µ—Å—è —á–µ—Ä–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è, –¥–æ–ø–æ–º–æ–∂–µ —Ö—É–∫ [`useMemo`](/reference/react/useMemo).
* –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∫–∏–Ω—É—Ç–∏ —Å—Ç–∞–Ω —É—Å—å–æ–≥–æ –ø—ñ–¥–¥–µ—Ä–µ–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ ‚Äî [–ø–µ—Ä–µ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π `key` –≤–∞—à–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É.](#resetting-state-with-a-key)
* –Ø–∫—â–æ –º–æ–∂–ª–∏–≤–æ ‚Äî –æ–Ω–æ–≤–ª—é–π—Ç–µ —É–≤–µ—Å—å –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Å—Ç–∞–Ω –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π.

–£ —Ä—ñ–¥–∫—ñ—Å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö, –∫–æ–ª–∏ –∂–æ–¥–Ω–µ –∑ —Ü–∏—Ö —Ä—ñ—à–µ–Ω—å –Ω–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å, –º–æ–∂–Ω–∞ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è —à–∞–±–ª–æ–Ω–æ–º, —É —è–∫–æ–º—É —Ñ—É–Ω–∫—Ü—ñ—è `set` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —Ä–µ–Ω–¥–µ—Ä—É, –∞–±–∏ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞—á–µ–Ω—å, —è–∫—ñ –≤–∂–µ –±—É–ª–∏ –≤—ñ–¥—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ñ.

–û—Å—å –ø—Ä–∏–∫–ª–∞–¥. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `CountLabel` –ø–æ–∫–∞–∑—É—î –ø—Ä–æ–ø `count`, —è–∫–∏–π –π–æ–º—É –ø–µ—Ä–µ–¥–∞–Ω–æ:

```js src/CountLabel.js
export default function CountLabel({ count }) {
  return <h1>{count}</h1>
}
```

–°–∫–∞–∂—ñ–º–æ, –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏, —á–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ *–∑—Ä–æ—Å–ª–æ —á–∏ –∑–º–µ–Ω—à–∏–ª–æ—Å—è* –∑ –º–æ–º–µ–Ω—Ç—É –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –∑–º—ñ–Ω–∏. –°–∞–º –ø–æ —Å–æ–±—ñ `count` —Ü—å–æ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—É—î ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –π–æ–≥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—É —Å—Ç–∞–Ω—É `prevCount`, —â–æ–± –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –π–æ–≥–æ. –î–æ–¥–∞–π—Ç–µ —Ç–∞–∫–æ–∂ `trend`, —è–∫–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ, –∑—Ä–æ—Å—Ç–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è —á–∏ –∑–º–µ–Ω—à—É—î—Ç—å—Å—è. –ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ `prevCount` —ñ `count`, —ñ —è–∫—â–æ –≤–æ–Ω–∏ –Ω–µ —Ä—ñ–≤–Ω—ñ ‚Äî –æ–Ω–æ–≤—ñ—Ç—å –æ–±–∏–¥–≤–∞. –¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–∫–∞–∑–∞—Ç–∏ –Ω–µ –ª–∏—à–µ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è, –∞–ª–µ –π *—è–∫ –≤–æ–Ω–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å*.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import CountLabel from './CountLabel.js';

export default function App() {
  const [count, setCount] = useState(0);
  return (
    <>
      <button onClick={() => setCount(count + 1)}>
        –ó–±—ñ–ª—å—à–∏—Ç–∏
      </button>
      <button onClick={() => setCount(count - 1)}>
        –ó–º–µ–Ω—à–∏—Ç–∏
      </button>
      <CountLabel count={count} />
    </>
  );
}
```

```js src/CountLabel.js active
import { useState } from 'react';

export default function CountLabel({ count }) {
  const [prevCount, setPrevCount] = useState(count);
  const [trend, setTrend] = useState(null);
  if (prevCount !== count) {
    setPrevCount(count);
    setTrend(count > prevCount ? '–∑—Ä–æ—Å—Ç–∞—î' : '—Å–ø–∞–¥–∞—î');
  }
  return (
    <>
      <h1>{count}</h1>
      {trend && <p>–ó–Ω–∞—á–µ–Ω–Ω—è {trend}</p>}
    </>
  );
}
```

```css
button { margin-bottom: 10px; }
```

</Sandpack>

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É: —è–∫—â–æ –≤–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ `set` –ø—ñ–¥ —á–∞—Å —Ä–µ–Ω–¥–µ—Ä—É, —Ü–µ –º–∞—î –±—É—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —É–º–æ–≤–∏ –Ω–∞ –∫—à—Ç–∞–ª—Ç `prevCount !== count`, —ñ –≤ —Ç—ñ–π –∂–µ —É–º–æ–≤—ñ –º–∞—î –±—É—Ç–∏ –≤–∏–∫–ª–∏–∫ `setPrevCount(count)`. –Ü–Ω–∞–∫—à–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞—Ü–∏–∫–ª–∏—Ç—å—Å—è —ñ –∑–ª–∞–º–∞—î—Ç—å—Å—è. –ö—Ä—ñ–º —Ç–æ–≥–æ, —Ç–∞–∫ –º–æ–∂–Ω–∞ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å—Ç–∞–Ω –ª–∏—à–µ *–ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞*. –í–∏–∫–ª–∏–∫ `set` –≤ *—ñ–Ω—à–æ–º—É* –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ –ø—ñ–¥ —á–∞—Å —Ä–µ–Ω–¥–µ—Ä—É ‚Äî –ø–æ–º–∏–ª–∫–∞. –ù–∞—Ä–µ—à—Ç—ñ, –≤–∏–∫–ª–∏–∫ `set` —É—Å–µ –æ–¥–Ω–æ –º–∞—î [–æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å—Ç–∞–Ω –±–µ–∑ –º—É—Ç–∞—Ü—ñ–π](#updating-objects-and-arrays-in-state), —Ç–∞–∫–æ–∂ —Ü–µ –Ω–µ –¥–æ–∑–≤—ñ–ª –ø–æ—Ä—É—à—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ [–ø—Ä–∞–≤–∏–ª–∞ —á–∏—Å—Ç–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π.](/learn/keeping-components-pure)

–¶–µ–π –ø–∞—Ç–µ—Ä–Ω –¥–æ—Å–∏—Ç—å —Å–∫–ª–∞–¥–Ω–∏–π –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è —ñ –∑–∞–∑–≤–∏—á–∞–π –∫—Ä–∞—â–µ –π–æ–≥–æ —É–Ω–∏–∫–∞—Ç–∏. –ê–ª–µ –≤—ñ–Ω –∫—Ä–∞—â–∏–π, –Ω—ñ–∂ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –≤ –µ—Ñ–µ–∫—Ç—ñ. –ö–æ–ª–∏ –≤–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ `set` –ø—ñ–¥ —á–∞—Å —Ä–µ–Ω–¥–µ—Ä—É, React –≤–∏–∫–æ–Ω–∞—î –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è `return`, –¥–æ —Ç–æ–≥–æ, —è–∫ –ø–æ—á–Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ –¥–æ—á—ñ—Ä–Ω—ñ. –¢–æ–±—Ç–æ, –¥–æ—á—ñ—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—å—Å—è –¥–≤—ñ—á—ñ. –†–µ—à—Ç–∞ –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—Å–µ –æ–¥–Ω–æ –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è (–∞–ª–µ —ó—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ –≤—ñ–¥–∫–∏–Ω—É—Ç–æ). –Ø–∫—â–æ —É–º–æ–≤–∞ –≤–∏–∫–ª–∏–∫—É `set` –π–¥–µ –ø—ñ—Å–ª—è –≤—Å—ñ—Ö —Ö—É–∫—ñ–≤ ‚Äî –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —Ä–∞–Ω–Ω—ñ–π `return;`, –∞–±–∏ –ø–æ—á–∞—Ç–∏ —Ä–µ–Ω–¥–µ—Ä —Ä–∞–Ω—ñ—à–µ.

---

## –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ {/*troubleshooting*/}

### –Ø –æ–Ω–æ–≤–∏–≤ —Å—Ç–∞–Ω, –∞–ª–µ –≤ –∫–æ–Ω—Å–æ–ª—ñ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è —Å—Ç–∞—Ä–µ –∑–Ω–∞—á–µ–Ω–Ω—è {/*ive-updated-the-state-but-logging-gives-me-the-old-value*/}

–í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó `set` **–Ω–µ –∑–º—ñ–Ω—é—î —Å—Ç–∞–Ω —É –≤–∏–∫–æ–Ω—É–≤–∞–Ω–æ–º—É –∫–æ–¥—ñ**:

```js {4,5,8}
function handleClick() {
  console.log(count);  // 0

  setCount(count + 1); // –ó–∞–ø–∏—Ç –Ω–∞ —Ä–µ—Ä–µ–Ω–¥–µ—Ä —ñ–∑ 1
  console.log(count);  // –í—Å–µ —â–µ 0!

  setTimeout(() => {
    console.log(count); // –¢–∞–∫–æ–∂ 0!
  }, 5000);
}
```

–¶–µ —Ç–æ–º—É, —â–æ [—Å—Ç–∞–Ω –ø–æ–≤–æ–¥–∏—Ç—å—Å—è —è–∫ –∑–Ω—ñ–º–æ–∫ (snapshot).](/learn/state-as-a-snapshot) –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É ‚Äî —Ü–µ –∑–∞–ø–∏—Ç –Ω–∞ –Ω–æ–≤–∏–π —Ä–µ–Ω–¥–µ—Ä —ñ–∑ –Ω–æ–≤–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º —Å—Ç–∞–Ω—É, –∞–ª–µ –≤–æ–Ω–æ –Ω–µ –∑–º—ñ–Ω—é—î –∑–º—ñ–Ω–Ω—É `count` —É –≤–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–æ–º—É –æ–±—Ä–æ–±–Ω–∏–∫—É –ø–æ–¥—ñ–π.

–Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Å—Ç–∞–Ω ‚Äî –∑–±–µ—Ä–µ–∂—ñ—Ç—å –π–æ–≥–æ –≤ –∑–º—ñ–Ω–Ω—É –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞–Ω–Ω—è–º —É `set`:

```js
const nextCount = count + 1;
setCount(nextCount);

console.log(count);     // 0
console.log(nextCount); // 1
```

---

### –Ø –æ–Ω–æ–≤–∏–≤ —Å—Ç–∞–Ω, –∞–ª–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è {/*ive-updated-the-state-but-the-screen-doesnt-update*/}

React **—ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏–º–µ –≤–∞—à–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, —è–∫—â–æ –Ω–æ–≤–∏–π —Å—Ç–∞–Ω —ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–π –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É,** –∑–≥—ñ–¥–Ω–æ –∑ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è–º –∑–∞ [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is). –¶–µ –∑–∞–∑–≤–∏—á–∞–π —Ç—Ä–∞–ø–ª—è—î—Ç—å—Å—è, –∫–æ–ª–∏ –≤–∏ –Ω–∞–ø—Ä—è–º—É –∑–º—ñ–Ω—é—î—Ç–µ –æ–±‚Äô—î–∫—Ç –∞–±–æ –º–∞—Å–∏–≤ —É —Å—Ç–∞–Ω—ñ:

```js
obj.x = 10;  // üö© –ü–æ–º–∏–ª–∫–∞: –º—É—Ç–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–æ–≥–æ –æ–±‚Äô—î–∫—Ç–∞
setObj(obj); // üö© –ù–µ —Å–ø—Ä–∞—Ü—é—î
```

–í–∏ –∑–º—ñ–Ω–∏–ª–∏ —ñ—Å–Ω—É—é—á–∏–π –æ–±‚Äô—î–∫—Ç `obj` —ñ –∑–Ω–æ–≤—É –ø–µ—Ä–µ–¥–∞–ª–∏ –π–æ–≥–æ —É `setObj`, —Ç–æ–º—É React –ø—Ä–æ—ñ–≥–Ω–æ—Ä—É–≤–∞–≤ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è. –©–æ–± —Ü–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏, –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–≤–∂–¥–∏ [_–∑–∞–º—ñ–Ω—é–≤–∞—Ç–∏_ –æ–±‚Äô—î–∫—Ç–∏ –π –º–∞—Å–∏–≤–∏ —É —Å—Ç–∞–Ω—ñ –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± _–º—É—Ç—É–≤–∞—Ç–∏_ —ó—Ö](#updating-objects-and-arrays-in-state):

```js
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –æ–±‚Äô—î–∫—Ç–∞
setObj({
  ...obj,
  x: 10
});
```

---

### –Ø –æ—Ç—Ä–∏–º—É—é –ø–æ–º–∏–ª–∫—É: "Too many re-renders" {/*im-getting-an-error-too-many-re-renders*/}

–í–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –ø–æ–º–∏–ª–∫—É: `Too many re-renders. React limits the number of renders to prevent an infinite loop.` –ó–∞–∑–≤–∏—á–∞–π —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤–∏ –±–µ–∑—É–º–æ–≤–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É *–ø—ñ–¥ —á–∞—Å —Ä–µ–Ω–¥–µ—Ä—É*, —Ç–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—Ö–æ–¥–∏—Ç—å —É —Ü–∏–∫–ª: —Ä–µ–Ω–¥–µ—Ä, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É (—è–∫–µ —Å–ø—Ä–∏—á–∏–Ω—è—î —Ä–µ–Ω–¥–µ—Ä), —Ä–µ–Ω–¥–µ—Ä, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É —ñ —Ç–∞–∫ –¥–∞–ª—ñ. –î—É–∂–µ —á–∞—Å—Ç–æ —Ü–µ —Ç—Ä–∞–ø–ª—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø–æ–º–∏–ª–∫—É –≤ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∞ –ø–æ–¥—ñ–π:

```js {1-2}
// üö© –ü–æ–º–∏–ª–∫–∞: –æ–±—Ä–æ–±–Ω–∏–∫ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —Ä–µ–Ω–¥–µ—Ä—É
return <button onClick={handleClick()}>–ù–∞—Ç–∏—Å–Ω–∏ –º–µ–Ω–µ</button>

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–±—Ä–æ–±–Ω–∏–∫
return <button onClick={handleClick}>–ù–∞—Ç–∏—Å–Ω–∏ –º–µ–Ω–µ</button>

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —Å—Ç—Ä—ñ–ª–æ—á–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è
return <button onClick={(e) => handleClick(e)}>–ù–∞—Ç–∏—Å–Ω–∏ –º–µ–Ω–µ</button>
```

–Ø–∫—â–æ –Ω–µ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É —Ü—ñ—î—ó –ø–æ–º–∏–ª–∫–∏, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å —Å—Ç—Ä—ñ–ª–∫—É –ø–æ—Ä—É—á —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º —É –∫–æ–Ω—Å–æ–ª—ñ —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ JavaScript, —â–æ–± –∑–Ω–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó `set`, —â–æ —Å–ø—Ä–∏—á–∏–Ω—è—î –ø–æ–º–∏–ª–∫—É.

---

### –ú–æ—è —Ñ—É–Ω–∫—Ü—ñ—è-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä –∞–±–æ —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –¥–≤—ñ—á—ñ {/*my-initializer-or-updater-function-runs-twice*/}

–£ [—Ä–µ–∂–∏–º—ñ Strict Mode](/reference/react/StrictMode) React –≤–∏–∫–ª–∏–∫–∞—î –¥–µ—è–∫—ñ –∑ –≤–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π –¥–≤—ñ—á—ñ –∑–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—É:

```js {2,5-6,11-12}
function TodoList() {
  // –¶—è —Ñ—É–Ω–∫—Ü—ñ—è-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏–º–µ—Ç—å—Å—è –¥–≤—ñ—á—ñ –ø—ñ–¥ —á–∞—Å –∫–æ–∂–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É.

  const [todos, setTodos] = useState(() => {
    // –¶—è —Ñ—É–Ω–∫—Ü—ñ—è-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∞ –¥–≤—ñ—á—ñ –ø—ñ–¥ —á–∞—Å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.
    return createTodos();
  });

  function handleClick() {
    setTodos(prevTodos => {
      // –¶—è —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∞ –¥–≤—ñ—á—ñ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∫–ª—ñ–∫—É.
      return [...prevTodos, createTodo()];
    });
  }
  // ...
```

–¶–µ –æ—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ —ñ –≤–æ–Ω–∞ –Ω–µ –ø–æ–≤–∏–Ω–Ω–∞ –ø–æ—Ä—É—à–∏—Ç–∏ –ª–æ–≥—ñ–∫—É –≤–∞—à–æ–≥–æ –∫–æ–¥—É.

–¶–µ **–ª–∏—à–µ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏** —ñ –¥–æ–ø–æ–º–∞–≥–∞—î [–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —á–∏—Å—Ç–∏–º–∏.](/learn/keeping-components-pure) React –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–Ω–æ–≥–æ –∑ –≤–∏–∫–ª–∏–∫—ñ–≤ —ñ —ñ–≥–Ω–æ—Ä—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ñ–Ω—à–æ–≥–æ. –Ø–∫—â–æ –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä —ñ —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á —î —á–∏—Å—Ç–∏–º–∏, —Ü—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –Ω–µ –ø–æ–≤–∏–Ω–Ω–∞ –≤–ø–ª–∏–Ω—É—Ç–∏ –Ω–∞ –ª–æ–≥—ñ–∫—É. –Ø–∫—â–æ –∂ –≤–æ–Ω–∏ –º–∞—é—Ç—å –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ ‚Äî —Ü–µ –¥–æ–ø–æ–º–æ–∂–µ –≤–∏—è–≤–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –æ—Å—å —Ü—è –Ω–µ—á–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á –º—É—Ç—É—î –º–∞—Å–∏–≤ —É —Å—Ç–∞–Ω—ñ:

```js {2,3}
setTodos(prevTodos => {
  // üö© –ü–æ–º–∏–ª–∫–∞: –º—É—Ç–∞—Ü—ñ—è —Å—Ç–∞–Ω—É
  prevTodos.push(createTodo());
});
```

–û—Å–∫—ñ–ª—å–∫–∏ React –≤–∏–∫–ª–∏–∫–∞—î –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é-–æ–Ω–æ–≤–ª—é–≤–∞—á –¥–≤—ñ—á—ñ, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ, —â–æ todo –¥–æ–¥–∞–Ω–æ –¥–≤—ñ—á—ñ ‚Äî —Ü–µ —Å–∏–≥–Ω–∞–ª—ñ–∑—É—î –ø—Ä–æ –ø–æ–º–∏–ª–∫—É. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –º–æ–∂–Ω–∞ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ —Ü–µ [–∑–∞–º—ñ–Ω—é—é—á–∏ –º–∞—Å–∏–≤ –Ω–æ–≤–∏–º, –∞ –Ω–µ –º—É—Ç—É—é—á–∏ –π–æ–≥–æ](#updating-objects-and-arrays-in-state):

```js {2,3}
setTodos(prevTodos => {
  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É
  return [...prevTodos, createTodo()];
});
```

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á —á–∏—Å—Ç–∞, —ó—ó –ø–æ–≤—Ç–æ—Ä–Ω–∏–π –≤–∏–∫–ª–∏–∫ –Ω–µ –∑–º—ñ–Ω—é—î –ø–æ–≤–µ–¥—ñ–Ω–∫–∏. –°–∞–º–µ —Ç–æ–º—É –ø–æ–¥–≤—ñ–π–Ω–∏–π –≤–∏–∫–ª–∏–∫ –¥–æ–ø–æ–º–∞–≥–∞—î –≤–∏—è–≤–ª—è—Ç–∏ –ø–æ–º–∏–ª–∫–∏. **–õ–∏—à–µ —Ñ—É–Ω–∫—Ü—ñ—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä–∞ —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ —á–∏—Å—Ç–∏–º–∏.** –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ —á–∏—Å—Ç–∏–º–∏, —Ç–æ–∂ React –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏–º–µ —ó—Ö –¥–≤—ñ—á—ñ.

–î—ñ–∑–Ω–∞–π—Ç–µ—Å—å –±—ñ–ª—å—à–µ –∑ —Ä–æ–∑–¥—ñ–ª—É [–ø—Ä–æ —á–∏—Å—Ç–æ—Ç—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤.](/learn/keeping-components-pure)

---

### –Ø –Ω–∞–º–∞–≥–∞—é—Å—è –∑–±–µ—Ä–µ–≥—Ç–∏ —É —Å—Ç–∞–Ω —Ñ—É–Ω–∫—Ü—ñ—é, –∞–ª–µ –≤–æ–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∑–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ {/*im-trying-to-set-state-to-a-function-but-it-gets-called-instead*/}

–ù–µ –º–æ–∂–Ω–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é —É —Å—Ç–∞–Ω –æ—Å—å —Ç–∞–∫:

```js
const [fn, setFn] = useState(someFunction);

function handleClick() {
  setFn(someOtherFunction);
}
```

–û—Å–∫—ñ–ª—å–∫–∏ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é, React –ø—Ä–∏–ø—É—Å–∫–∞—î, —â–æ `someFunction` ‚Äî —Ü–µ [—Ñ—É–Ω–∫—Ü—ñ—è-—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä](#avoiding-recreating-the-initial-state), –∞ `someOtherFunction` ‚Äî [—Ñ—É–Ω–∫—Ü—ñ—è-–æ–Ω–æ–≤–ª—é–≤–∞—á](#updating-state-based-on-the-previous-state), —Ç–æ–º—É –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —ó—Ö —ñ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –©–æ–± –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ *–∑–±–µ—Ä–µ–≥—Ç–∏* —Ñ—É–Ω–∫—Ü—ñ—é, –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ `() =>` –ø–µ—Ä–µ–¥ –Ω–∏–º–∏ –≤ –æ–±–æ—Ö –≤–∏–ø–∞–¥–∫–∞—Ö. –¢–æ–¥—ñ React –∑–±–µ—Ä–µ–∂–µ –ø–µ—Ä–µ–¥–∞–Ω—ñ –≤–∞–º–∏ —Ñ—É–Ω–∫—Ü—ñ—ó.

```js {1,4}
const [fn, setFn] = useState(() => someFunction);

function handleClick() {
  setFn(() => someOtherFunction);
}
```
